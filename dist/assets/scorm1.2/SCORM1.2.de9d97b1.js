!function(){function t(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("58dpJ",(function(i,n){t(i.exports,"Connector",(function(){return v}));var r=e("9Klpk"),o=e("3bWnf"),s=e("kb0qF"),a=e("5ENmm"),c=e("6Wo7Q"),u=e("bWNdT"),l=e("knzCS"),d=e("cRTHJ"),f=e("jxbaN"),h=e("jjBAR"),v=function(t){"use strict";(0,s.default)(i,t);var e=(0,u.default)(i);function i(){var t,n;if((0,r.default)(this,i),(t=e.call(this)).active=!1,t.db={quiz:[],survey:[],task:[]},t.id={quiz:[],survey:[],task:[]},console.warn("Hello, this is LiaScript from within a SCORM 1.2 package. You should definitely try out the SCORM 2004 exporter, since this one cannot be used to store states or any kind of progress. The only thing that is stores, is currently the user location...\n\nIF YOU ARE AN ELABORATE AND EXPERIENCED SCORM DEVELOPER?\n========================================================\n\nAnd you want to help us, to extend this service, please contact us via LiaScript@web.de\n\nHave fun ;-)"),window.API||window.top&&window.top.API?t.scorm=window.API||(null===(n=window.top)||void 0===n?void 0:n.API):t.scorm=(0,h.getAPI)(),t.scorm){y("successfully opened API"),y("LMSInitialize",t.scorm.LMSInitialize("")),y("loading quizzes ...");try{t.db.quiz=window.config_.quiz||[[]],y(" ... done")}catch(t){g("... failed",t)}y("loading surveys ...");try{t.db.survey=window.config_.survey||[[]],y(" ... done")}catch(t){g("... failed",t)}y("loading tasks ...");try{t.db.task=window.config_.task||[[]],y(" ... done")}catch(t){g("... failed",t)}t.init()}return t}return(0,o.default)(i,[{key:"init",value:function(){if(this.scorm){var t=this.scorm.LMSGetValue("cmi.core.lesson_mode")||"unknown";this.active="normal"===t||"unknown"===t,g('Running in "'+t+'" mode, results will'+(this.active?" ":" NOT ")+"be stored!"),y("open location ..."),this.location=f.jsonParse(this.scorm.LMSGetValue("cmi.core.lesson_location")),y("... ",this.location||0),null===this.location&&this.slide(0);var e=0;0===this.countObjectives()&&this.active?(y("seeding values ..."),e=this.initFirst("quiz",e),e=this.initFirst("survey",e),e=this.initFirst("task",e),y("... done")):(y("restoring values ..."),e=this.initSecond("quiz",e),e=this.initSecond("survey",e),e=this.initSecond("task",e),y("... done")),window.SCORE=0,this.score()}}},{key:"initFirst",value:function(t,e){for(var i=0;i<this.db[t].length;i++){this.id[t].push([]);for(var n=0;n<this.db[t][i].length;n++)this.setObjective(e,this.db[t][i][n]),this.id[t][i].push(e),e++}return e}},{key:"initSecond",value:function(t,e){for(var i=0;i<this.db[t].length;i++){this.id[t].push([]);for(var n=0;n<this.db[t][i].length;n++){var r=this.getObjective(e);r&&(this.db[t][i][n]=r),this.id[t][i].push(e),e++}}return e}},{key:"score",value:function(){var t;if(this.active&&this.score){for(var e=0,i=0,n=0,r=0,o=0;o<this.db.quiz.length;o++)for(var s=0;s<this.db.quiz[o].length;s++)switch(e+=r=this.db.quiz[o][s].score,this.db.quiz[o][s].solved){case 1:i+=r;case-1:n+=r}for(var c=0,u=0,l=0;l<this.db.survey.length;l++)for(var d=0;d<this.db.survey[l].length;d++)c+=1,this.db.survey[l][d].submitted&&(u+=1);var h,v,g,m,p=0===c||c===u,b=0===i?0:i/e;this.write("cmi.core.score.min","0"),this.write("cmi.core.score.max","100"),this.write("cmi.core.score.raw",(h=(100*b).toFixed(4),v=(0,a.default)(h.toString().split("."),2),g=v[0],m=v[1],"".concat(g,".").concat(m.padEnd(10,"0"))));var S=f.jsonParse((null===(t=this.scorm)||void 0===t?void 0:t.LMSGetValue("cmi.student_data.mastery_score"))||"null");null==S?0===e&&c>0&&p?this.write("cmi.core.lesson_status","completed"):this.write("cmi.core.lesson_status","not attempted"):(b>=S/100||0===e)&&p?this.write("cmi.core.lesson_status","passed"):n+i===e&&e>0&&p?this.write("cmi.core.lesson_status","failed"):this.write("cmi.core.lesson_status","incomplete"),y("SCORE updated =>",b,"surveys =>","".concat(u,"/").concat(c)),window.SCORE=b}}},{key:"open",value:function(t,e,i){if(null!==this.location){var n=this.location;setTimeout((function(){window.LIA.goto(n)}),500)}}},{key:"slide",value:function(t){this.location=t,this.scorm&&this.active&&(this.scorm.LMSSetValue("cmi.core.lesson_location",JSON.stringify(t)),this.scorm.LMSCommit(""))}},{key:"countObjectives",value:function(){return this.scorm?parseInt(this.scorm.LMSGetValue("cmi.objectives._count"))||0:null}},{key:"initSettings",value:function(t){return d.Settings.init(t,!1,this.setSettings)}},{key:"setSettings",value:function(t){this.write("cmi.suspend_data",JSON.stringify(t))}},{key:"getSettings",value:function(){var t="";try{var e;t=(null===(e=this.scorm)||void 0===e?void 0:e.LMSGetValue("cmi.suspend_data"))||null}catch(t){g("cannot read settings from cmi.suspend_data")}var i=null;if("string"==typeof t){try{i=JSON.parse(t)}catch(t){g("getSettings =>",t)}i||(i=d.Settings.data),window.innerWidth<=768&&(i.table_of_contents=!1)}return i}},{key:"write",value:function(t,e){if(this.scorm){this.escape&&(e=e.replace(/"/g,'\\"'));try{this.scorm.LMSSetValue(t,e),this.scorm.LMSCommit("")}catch(i){if(g("Failed to write =>",t,e),g("Message:",i.message),void 0===this.escape){e=e.replace(/"/g,'\\"');try{this.scorm.LMSSetValue(t,e),this.scorm.LMSCommit(""),this.escape=!0}catch(t){this.escape=!1}}}}else g("could not write",t,e)}},{key:"getObjective",value:function(t){var e;try{if(this.scorm&&(e=this.scorm.LMSGetValue("cmi.objectives.".concat(t,".id"))))return f.decodeJSON(e)}catch(i){g("getObjective =>",i,"cmi.objectives.".concat(t,".id"),e)}return null}},{key:"setObjective",value:function(t,e){var i=f.encodeJSON(e);i.length>255&&g("cmi.objectives.".concat(t,".id"),"Content exceeds 256Bytes!"),this.write("cmi.objectives.".concat(t,".id"),i)}},{key:"load",value:function(t){switch(t.table){case"quiz":case"survey":case"task":return y("loading ",t.table,t.id,this.db[t.table][t.id]),this.db[t.table][t.id]}}},{key:"store",value:function(t){if(this.active)switch(g("store",t),t.table){case"quiz":case"survey":this.storeHelper(t),this.score();break;case"task":this.storeHelper(t)}}},{key:"storeHelper",value:function(t){for(var e=0;e<this.db[t.table][t.id].length;e++)f.neq(t.data[e],this.db[t.table][t.id][e])&&(this.setObjective(this.id[t.table][t.id][e],t.data[e]),this.db[t.table][t.id][e]=t.data[e],"quiz"==t.table?this.updateQuiz(this.id[t.table][t.id][e],t.data[e]):"survey"==t.table&&t.data[e].submitted&&this.updateSurvey(this.id[t.table][t.id][e],t.data[e]))}},{key:"updateQuiz",value:function(t,e){if(this.active)switch(e.solved){case 0:e.trial>0&&this.write("cmi.objectives.".concat(t,".status"),"failed");break;case 1:this.write("cmi.objectives.".concat(t,".status"),"completed");break;case-1:this.write("cmi.objectives.".concat(t,".status"),"incomplete")}}},{key:"updateSurvey",value:function(t,e){this.active&&e.submitted&&this.write("cmi.objectives.".concat(t,".status"),"completed")}}]),i}(l.Connector);function y(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n;(n=console).log.apply(n,["SCORM1.2: "].concat((0,c.default)(e)))}function g(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n;(n=console).log.apply(n,["SCORM1.2: "].concat((0,c.default)(e)))}})),e.register("knzCS",(function(i,n){t(i.exports,"Connector",(function(){return l}));var r=e("hnmIs"),o=e("9Klpk"),s=e("3bWnf"),a=e("32Euv"),c=e("87lFe"),u=e("cRTHJ"),l=function(){"use strict";function t(){(0,o.default)(this,t)}return(0,s.default)(t,[{key:"hasIndex",value:function(){return!1}},{key:"storage",value:function(){return new c.LiaStorage}},{key:"initSettings",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.Settings.init(t,e,this.setSettings)}},{key:"setSettings",value:function(t){u.Settings.update(t)}},{key:"getSettings",value:function(){var t="";try{t=localStorage.getItem(u.Settings.PORT)}catch(t){console.warn("cannot write to localStorage")}var e=null;if("string"==typeof t){try{e=JSON.parse(t)}catch(t){console.warn("getSettings =>",t)}e||(e=u.Settings.data),window.innerWidth<=768&&(e.table_of_contents=!1)}return e}},{key:"open",value:function(t,e,i){}},{key:"load",value:function(t){}},{key:"store",value:function(t){}},{key:"update",value:function(t,e){}},{key:"slide",value:function(t){}},{key:"getIndex",value:function(){}},{key:"deleteFromIndex",value:function(t){}},{key:"storeToIndex",value:function(t){return(0,r.default)((function(){return(0,a.__generator)(this,(function(t){return[2]}))}))()}},{key:"restoreFromIndex",value:function(t,e){}},{key:"reset",value:function(t,e){this.initSettings(null,!0)}},{key:"getFromIndex",value:function(t){return(0,r.default)((function(){return(0,a.__generator)(this,(function(t){return[2,null]}))}))()}},{key:"addMisc",value:function(t,e,i,n){return(0,r.default)((function(){return(0,a.__generator)(this,(function(t){return console.log("addMisc not implemented"),[2]}))}))()}},{key:"getMisc",value:function(t,e,i){return(0,r.default)((function(){return(0,a.__generator)(this,(function(t){return console.log("getMisc not implemented"),[2]}))}))()}}]),t}()})),e.register("87lFe",(function(i,n){t(i.exports,"LiaStorage",(function(){return a}));var r=e("9Klpk"),o=e("3bWnf"),s=e("5ENmm"),a=function(){"use strict";function t(){(0,r.default)(this,t)}return(0,o.default)(t,[{key:"getItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"string"==typeof t&&(t=[t]);for(var e={},i=0;i<t.length;i++){var n=localStorage.getItem(t[i]);e[t[i]]=n?JSON.parse(n):n}return e}},{key:"setItems",value:function(t){this._setLocal(t)}},{key:"_setLocal",value:function(t){var e=!0,i=!1,n=void 0;if("object"==typeof t)try{for(var r,o=Object.entries(t)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=(0,s.default)(r.value,2),c=a[0],u=a[1];localStorage.setItem(c,JSON.stringify(u))}}catch(t){i=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}}}]),t}()})),e.register("jxbaN",(function(i,n){t(i.exports,"encodeJSON",(function(){return c})),t(i.exports,"decodeJSON",(function(){return u})),t(i.exports,"jsonParse",(function(){return l})),t(i.exports,"neq",(function(){return d}));var r=e("5ENmm"),o={SingleChoice:"sc",MultipleChoice:"mc",Text:"tx",Select:"st",Matrix:"mx",Generic:"gn",error_msg:"err"},s=Object.entries(o).reduce((function(t,e){var i=(0,r.default)(e,2),n=i[0];return t[i[1]]=n,t}),{});function a(t,e){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return t.map((function(t){return a(t,e)}));var i={},n=!0,o=!1,s=void 0;try{for(var c,u=Object.entries(t)[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var l=(0,r.default)(c.value,2),d=l[0],f=l[1];i[e[d]||d]=a(f,e)}}catch(t){o=!0,s=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw s}}return i}function c(t){return JSON.stringify(a(t,o))}function u(t){return a(JSON.parse(t),s)}function l(t){try{return JSON.parse(t)}catch(t){}return null}function d(t,e){return JSON.stringify(t)!=JSON.stringify(e)}})),e.register("jjBAR",(function(e,i){t(e.exports,"getAPI",(function(){return o}));var n=0;function r(t){for(;null==t.API&&null!=t.parent&&t.parent!=t;){if(++n>7)return alert("Error finding API -- too deeply nested."),null;t=t.parent}return t.API}function o(){var t=r(window);return null==t&&null!=window.opener&&void 0!==window.opener&&(t=r(window.opener)),null==t&&alert("Unable to find the SCORM1.2 API adapter"),t}}))}();