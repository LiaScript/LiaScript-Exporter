function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;t.register("iyAFm",(function(n,o){e(n.exports,"Sync",(function(){return c}));var r=t("2Xs1f"),s=t("5Owdb"),i=t("2O3kG");class c extends s.Sync{destroy(){var e;this.trackersAnnounceURLs=[],null===(e=this.p2pt)||void 0===e||e.destroy(),super.destroy()}async connect(e){super.connect(e),this.trackersAnnounceURLs=e.config||[],window.P2PT?this.init(!0):(window.P2PT=await t("7gUjV"),this.load([i.Crypto.url],this))}init(e,t){if(0==this.trackersAnnounceURLs.length)return this.sendDisconnectError("You have to provide at least one WebTorrent tracker.");const n=this.uniqueID();if(e&&window.P2PT&&n){this.p2pt=new window.P2PT(this.trackersAnnounceURLs,n),i.Crypto.init(this.password);const e=this;this.p2pt.on("trackerconnect",((t,n)=>{console.log("Connected to tracker : "+t.announceUrl),console.log("Tracker stats : "+JSON.stringify(n)),e.sendConnect()})),this.p2pt.on("trackerwarning",((e,t)=>{console.log("Connected to tracker : ",e),console.log("Tracker stats : "+JSON.stringify(t))})),this.p2pt.on("peerconnect",(t=>{console.warn("Peer connected : "+t.id,t),e.peers[t.id]=t})),this.p2pt.on("peerclose",(t=>{console.warn("Peer disconnected : "+t);const n=e.tokens[t.id];n&&(e.db.removePeer(n),delete e.tokens[t.id]),delete e.peers[t.id]})),this.p2pt.on("msg",((t,n)=>{if(console.warn(`Got message from ${t.id} : ${n}`),n)try{const[o,r,c]=i.Crypto.decode(n);o!=e.token&&null!=c&&(r?e.applyUpdate(s.base64_to_unit8(c)):e.pubsubReceive(s.base64_to_unit8(c)),e.tokens[t.id]||(e.tokens[t.id]=o))}catch(e){console.warn("P2PT",e.message)}})),this.p2pt.start()}else{let e="P2PT unknown error";t?e="Could not load resource: "+t:window.P2PT||(e="Could not load P2PT interface"),this.sendDisconnectError(e)}}broadcast(e,t){if(!this.p2pt)return;const n=null==t?null:s.uint8_to_base64(t),o=i.Crypto.encode([this.token,e,n]);for(const e in this.peers)this.p2pt.send(this.peers[e],o)}constructor(...e){super(...e),(0,r.default)(this,"trackersAnnounceURLs",[]),(0,r.default)(this,"peers",{}),(0,r.default)(this,"tokens",{})}}})),t.register("2O3kG",(function(t,n){e(t.exports,"Crypto",(function(){return o}));const o={url:"https://cdn.jsdelivr.net/npm/simple-crypto-js@2.5.0/dist/SimpleCrypto.min.js",crypt:null,check:function(){return!!window.SimpleCrypto},init:function(e){try{"string"==typeof e&&e.length>0?this.crypt=new SimpleCrypto(e):this.crypt=null}catch(e){console.warn("Crypto: ",e),this.crypt=null}},encode:function(e){return this.crypt?this.crypt.encrypt(btoa(encodeURIComponent(JSON.stringify(e)))):JSON.stringify(e)},decode:function(e){return this.crypt?JSON.parse(decodeURIComponent(atob(this.crypt.decrypt(e)))):JSON.parse(e)}}})),t.register("7gUjV",(function(e,n){e.exports=import("./"+t("abmWv").resolve("4lXxH")).then((()=>t("9P9uR")))}));