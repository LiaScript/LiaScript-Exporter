var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;t.register("aYlFN",(function(e,n){var s,i,o,r;s=e.exports,i="Sync",o=function(){return l},Object.defineProperty(s,i,{get:o,set:r,enumerable:!0,configurable:!0});var c=t("5Owdb"),a={nostr:null,mqtt:null,torrent:null};class l extends c.Sync{destroy(){this.connection&&this.connection.leave(),super.destroy()}async connect(e){if(super.connect(e),a[this.backend])this.init(!0);else switch(this.backend){case"nostr":t("92PmE").then((t=>{a.nostr=t.joinRoom,this.init(!0)})).catch((t=>{this.init(!1,t.message)}));break;case"mqtt":t("4kim4").then((t=>{a.mqtt=t.joinRoom,this.init(!0)})).catch((t=>{this.init(!1,t.message)}));break;case"torrent":t("6JGcL").then((t=>{a.torrent=t.joinRoom,this.init(!0)})).catch((t=>{this.init(!1,t.message)}))}}init(t,e){const n=this.uniqueID();if(t&&n){const t={appId:"liascript"};this.password&&(t.password=this.password);const e=JSON.parse("null");e&&(t.rtcConfig=e),this.connection=a[this.backend](t,n),this.connection.onPeerJoin((t=>console.log(`${t} joined`))),this.connection.onPeerLeave((t=>console.log(`${t} left`)));const[s,i]=this.connection.makeAction("message");this.pub=s,this.sub=i;const o=this;this.sub(((t,e)=>{if(t)try{const[e,n,s]=t;if(e){if(null===n)return;s==o.db.timestamp?o.applyUpdate(c.base64_to_unit8(n)):s>o.db.timestamp?o.broadcast(!0,o.db.encode()):(o.db.timestamp=s,o.applyUpdate(c.base64_to_unit8(n),!0))}else o.pubsubReceive(c.base64_to_unit8(n))}catch(t){console.warn(o.backend,t.message)}})),this.sendConnect()}else{let t=this.backend+" unknown error";e&&(t="Could not load resource: "+e),this.sendDisconnectError(t)}}broadcast(t,e){if(!this.publish)return;const n=null==e?null:c.uint8_to_base64(e);this.pub([t,n,this.db.timestamp])}constructor(t,e,n,s,i,o=!1,r=!0){super(e,n,s,i,o,r),this.backend=t}}})),t.register("92PmE",(function(e,n){e.exports=import("./"+t("abmWv").resolve("lYuyw")).then((()=>t("g9MJ9")))})),t.register("4kim4",(function(e,n){e.exports=import("./"+t("abmWv").resolve("7bLGf")).then((()=>t("i0BT1")))})),t.register("6JGcL",(function(e,n){e.exports=import("./"+t("abmWv").resolve("1lfZ9")).then((()=>t("hsMrW")))}));