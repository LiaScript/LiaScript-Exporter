!function(){var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;n.register("1UDrq",(function(e,t){var r,a;r=e.exports,a=function(){return Je},Object.defineProperty(r,"joinRoom",{get:a,set:void 0,enumerable:!0,configurable:!0});var u,o,i,c,f,s,l,d,v,p,y,h,g,b,m,w,k,A,_,T=n("hnmIs"),x=n("9Klpk"),P=n("3bWnf"),S=n("eT7f3"),E=n("bgoEC"),C=n("7j4mF"),U=n("5ENmm"),L=n("6Wo7Q"),D=n("rJmE6"),I=n("32Euv"),O={p:0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,n:0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n,h:1n,a:0n,b:7n,Gx:0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Gy:0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n},j=O.p,R=O.n,H=O.Gx,B=O.Gy,M=O.b,V=32,q=48,K=function(){var n=Error(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");throw function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r;"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&(r=Error).captureStackTrace.apply(r,(0,L.default)(e))}(n,K),n},Z=function(n,e){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=(t=n)instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name,u=null==n?void 0:n.length,o=void 0!==e;return(!a||o&&u!==e)&&K((r&&'"'.concat(r,'" '))+"expected Uint8Array"+(o?" of length "+e:"")+", got "+(a?"length="+u:"type="+(void 0===n?"undefined":(0,D.default)(n)))),n},X=function(n){return new Uint8Array(n)},N=function(n,e){return n.toString(16).padStart(e,"0")},Y=function(n){return Array.from(Z(n)).map((function(n){return N(n,2)})).join("")},G=function(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void 0},J=function(n){var e="hex invalid";if("string"!=typeof n)return K(e);var t=n.length,r=t/2;if(t%2)return K(e);for(var a=X(r),u=0,o=0;u<r;u++,o+=2){var i=G(n.charCodeAt(o)),c=G(n.charCodeAt(o+1));if(void 0===i||void 0===c)return K(e);a[u]=16*i+c}return a},z=function(){return null===globalThis||void 0===globalThis?void 0:globalThis.crypto},W=function(){var n;return null!==(_=null===(n=z())||void 0===n?void 0:n.subtle)&&void 0!==_?_:K("crypto.subtle must be defined, consider polyfill")},F=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=X(e.reduce((function(n,e){return n+Z(e).length}),0)),a=0;return e.forEach((function(n){r.set(n,a),a+=n.length})),r},Q=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return z().getRandomValues(X(n))},$=BigInt,nn=function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bad number: out of range";return function(n){return"bigint"==(void 0===n?"undefined":(0,D.default)(n))}(n)&&e<=n&&n<t?n:K(r)},en=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,t=n%e;return t>=0n?t:e+t},tn=function(n){return en(n,R)},rn=function(n){return n instanceof ln?n:K("Point expected")},an=function(n){return en(en(n*n)*n+M)},un=function(n){return nn(n,0n,j)},on=function(n){return nn(n,1n,j)},cn=function(n){return 0n===(1n&n)},fn=function(n){return Uint8Array.of(n)},sn=function(n){for(var e=an(on(n)),t=1n,r=e,a=(j+1n)/4n;a>0n;a>>=1n)1n&a&&(t=t*r%j),r=r*r%j;return en(t*t)===e?t:K("sqrt invalid")},ln=function(){"use strict";function n(e,t,r){(0,x.default)(this,n),(0,S.default)(this,"X",void 0),(0,S.default)(this,"Y",void 0),(0,S.default)(this,"Z",void 0),this.X=un(e),this.Y=on(t),this.Z=un(r),Object.freeze(this)}return(0,P.default)(n,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"equals",value:function(n){var e=this,t=e.X,r=e.Y,a=e.Z,u=rn(n),o=u.X,i=u.Y,c=u.Z,f=en(t*c),s=en(o*a),l=en(r*c),d=en(i*a);return f===s&&l===d}},{key:"is0",value:function(){return this.equals(vn)}},{key:"negate",value:function(){return new n(this.X,en(-this.Y),this.Z)}},{key:"double",value:function(){return this.add(this)}},{key:"add",value:function(e){var t=this,r=t.X,a=t.Y,u=t.Z,o=rn(e),i=o.X,c=o.Y,f=o.Z,s=0n,l=0n,d=0n,v=en(3n*M),p=en(r*i),y=en(a*c),h=en(u*f),g=en(r+a),b=en(i+c);g=en(g*b),b=en(p+y),g=en(g-b),b=en(r+u);var m=en(i+f);return b=en(b*m),m=en(p+h),b=en(b-m),m=en(a+u),s=en(c+f),m=en(m*s),s=en(y+h),m=en(m-s),d=en(0n*b),s=en(v*h),d=en(s+d),s=en(y-d),d=en(y+d),l=en(s*d),y=en(p+p),y=en(y+p),h=en(0n*h),b=en(v*b),y=en(y+h),h=en(p-h),h=en(0n*h),b=en(b+h),p=en(y*b),l=en(l+p),p=en(m*b),s=en(g*s),s=en(s-p),p=en(g*y),d=en(m*d),new n(s,l,d=en(d+p))}},{key:"subtract",value:function(n){return this.add(rn(n).negate())}},{key:"multiply",value:function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e&&0n===n)return vn;if(function(n){nn(n,1n,R)}(n),1n===n)return this;if(this.equals(dn))return Xn(n).p;for(var t=vn,r=dn,a=this;n>0n;a=a.double(),n>>=1n)1n&n?t=t.add(a):e&&(r=r.add(a));return t}},{key:"multiplyUnsafe",value:function(n){return this.multiply(n,!1)}},{key:"toAffine",value:function(){var n=this,e=n.X,t=n.Y,r=n.Z;if(this.equals(vn))return{x:0n,y:0n};if(1n===r)return{x:e,y:t};var a=function(n,e){(0n===n||e<=0n)&&K("no inverse n="+n+" mod="+e);for(var t=en(n,e),r=e,a=0n,u=1n;0n!==t;){var o=r%t,i=a-u*(r/t);r=t,t=o,a=u,u=i}return 1n===r?en(a,e):K("no inverse")}(r,j);return 1n!==en(r*a)&&K("inverse invalid"),{x:en(e*a),y:en(t*a)}}},{key:"assertValidity",value:function(){var n=this.toAffine(),e=n.x,t=n.y;return on(e),on(t),en(t*t)===an(e)?this:K("bad point: not on curve")}},{key:"toBytes",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.assertValidity().toAffine(),t=e.x,r=e.y,a=kn(t);return n?F(function(n){return fn(cn(n)?2:3)}(r),a):F(fn(4),a,kn(r))}},{key:"toHex",value:function(n){return Y(this.toBytes(n))}}],[{key:"CURVE",value:function(){return O}},{key:"fromAffine",value:function(e){var t=e.x,r=e.y;return 0n===t&&0n===r?vn:new n(t,r,1n)}},{key:"fromBytes",value:function(e){Z(e);var t,r=e.length,a=e[0],u=e.subarray(1),o=mn(u,0,V);if(33===r&&(2===a||3===a)){var i=sn(o),c=cn(i);cn($(a))!==c&&(i=en(-i)),t=new n(o,i,1n)}return 65===r&&4===a&&(t=new n(o,mn(u,V,64),1n)),t?t.assertValidity():K("bad point: not on curve")}},{key:"fromHex",value:function(e){return n.fromBytes(J(e))}}]),n}();(0,S.default)(ln,"BASE",void 0),(0,S.default)(ln,"ZERO",void 0);var dn=new ln(H,B,1n),vn=new ln(0n,1n,0n);ln.BASE=dn,ln.ZERO=vn;var pn,yn,hn,gn,bn=function(n){return $("0x"+(Y(n)||"0"))},mn=function(n,e,t){return bn(n.subarray(e,t))},wn=Math.pow(2n,256n),kn=function(n){return J(N(nn(n,0n,wn),64))},An="SHA-256",_n={hmacSha256Async:function(n,e){return(0,T.default)((function(){var t,r,a;return(0,I.__generator)(this,(function(u){switch(u.label){case 0:return t=W(),r="HMAC",[4,t.importKey("raw",n,{name:r,hash:{name:An}},!1,["sign"])];case 1:return a=u.sent(),[4,t.sign(r,a,e)];case 2:return[2,X.apply(void 0,[u.sent()])]}}))}))()},hmacSha256:void 0,sha256Async:function(n){return(0,T.default)((function(){return(0,I.__generator)(this,(function(e){switch(e.label){case 0:return[4,W().digest(An,n)];case 1:return[2,X.apply(void 0,[e.sent()])]}}))}))()},sha256:void 0},Tn=function(n){return Uint8Array.from("BIP0340/"+n,(function(n){return n.charCodeAt(0)}))},xn="nonce",Pn="challenge",Sn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var a=function(n){var e=_n[n];return"function"!=typeof e&&K("hashes."+n+" not set"),e}("sha256"),u=a(Tn(n));return a(F.apply(void 0,[u,u].concat((0,L.default)(t))))},En=(pn=(0,T.default)((function(n){var e,t,r,a,u,o=arguments;return(0,I.__generator)(this,(function(i){switch(i.label){case 0:for(e=o.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=o[r];return[4,(a=_n.sha256Async)(Tn(n))];case 1:return u=i.sent(),[4,a(F.apply(void 0,[u,u].concat((0,L.default)(t))))];case 2:return[2,i.sent()]}}))})),function(n){return pn.apply(this,arguments)}),Cn=function(n){var e=function(n){var e=bn(Z(n,V,"secret key"));return nn(e,1n,R,"invalid secret key: outside of range")}(n),t=dn.multiply(e).assertValidity().toAffine(),r=t.x,a=t.y;return{d:cn(a)?e:tn(-e),px:kn(r)}},Un=function(n){return tn(bn(n))},Ln=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Un(Sn.apply(void 0,[Pn].concat((0,L.default)(e))))},Dn=function(){var n=(0,T.default)((function(){var n,e,t,r=arguments;return(0,I.__generator)(this,(function(a){switch(a.label){case 0:for(n=r.length,e=new Array(n),t=0;t<n;t++)e[t]=r[t];return[4,En.apply(void 0,[Pn].concat((0,L.default)(e)))];case 1:return[2,Un.apply(void 0,[a.sent()])]}}))}));return function(){return n.apply(this,arguments)}}(),In=function(n){return Cn(n).px},On=(yn=In,function(n){var e=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q(q);Z(n),(n.length<q||n.length>1024)&&K("expected 40-1024b");var e=en(bn(n),R-1n);return kn(e+1n)}(n);return{secretKey:e,publicKey:yn(e)}}),jn=function(n,e,t){var r=Cn(e),a=r.px,u=r.d;return{m:Z(n),px:a,d:u,a:Z(t,V)}},Rn=function(n){var e=Un(n);0n===e&&K("sign failed: k is zero");var t=Cn(kn(e));return{rx:t.px,k:t.d}},Hn=function(n,e,t,r){return F(e,kn(tn(n+t*r)))},Bn="invalid signature produced",Mn=function(n,e,t,r){var a,u,o=Z(n,64,"signature"),i=Z(e,void 0,"message"),c=Z(t,V,"publicKey");try{var f=bn(c),s=sn(f),l=cn(s)?s:en(-s),d=new ln(f,l,1n).assertValidity(),v=kn(d.toAffine().x),p=mn(o,0,V);nn(p,1n,j);var y=mn(o,V,64);return nn(y,1n,R),a=r(F(kn(p),v,i)),u=function(n){var e,t,r,a=(e=d,t=y,r=tn(-n),dn.multiply(t,!1).add(e.multiply(r,!1)).assertValidity()).toAffine(),u=a.x,o=a.y;return!(!cn(o)||u!==p)},a instanceof Promise?a.then(u):u(a)}catch(n){return!1}},Vn=function(n,e,t){return Mn(n,e,t,Ln)},qn=function(){var n=(0,T.default)((function(n,e,t){return(0,I.__generator)(this,(function(r){return[2,Mn(n,e,t,Dn)]}))}));return function(e,t,r){return n.apply(this,arguments)}}(),Kn={keygen:On,getPublicKey:In,sign:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q(V),r=jn(n,e,t),a=r.m,u=r.px,o=r.d,i=r.a,c=Sn("aux",i),f=kn(o^bn(c)),s=Sn(xn,f,u,a),l=Rn(s),d=l.rx,v=l.k,p=Ln(d,u,a),y=Hn(v,d,p,o);return Vn(y,a,u)||K(Bn),y},verify:Vn,signAsync:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q(V);return(0,T.default)((function(){var r,a,u,o,i,c,f,s,l,d,v,p,y;return(0,I.__generator)(this,(function(h){switch(h.label){case 0:return r=jn(n,e,t),a=r.m,u=r.px,o=r.d,i=r.a,[4,En("aux",i)];case 1:return c=h.sent(),f=kn(o^bn(c)),[4,En(xn,f,u,a)];case 2:return s=h.sent(),l=Rn(s),d=l.rx,v=l.k,[4,Dn(d,u,a)];case 3:return p=h.sent(),y=Hn(v,d,p,o),[4,qn(y,a,u)];case 4:return[2,(h.sent()||K(Bn),y)]}}))}))()},verifyAsync:qn},Zn=function(n,e){var t=e.negate();return n?t:e},Xn=function(n){for(var e=hn||(hn=function(){for(var n=[],e=dn,t=e,r=0;r<33;r++){t=e,n.push(t);for(var a=1;a<128;a++)t=t.add(e),n.push(t);e=t.double()}return n}()),t=vn,r=dn,a=$(255),u=$(8),o=0;o<33;o++){var i=Number(n&a);n>>=u,i>128&&(i-=256,n+=1n);var c=128*o,f=c,s=c+Math.abs(i)-1,l=o%2!=0,d=i<0;0===i?r=r.add(Zn(l,e[f])):t=t.add(Zn(d,e[s]))}return 0n!==n&&K("invalid wnaf"),{p:t,f:r}},Nn=Math.floor,Yn=Math.random,Gn=Math.sin,Jn="Trystero",zn=function(n,e){return Array(n).fill().map(e)},Wn=function(n){return zn(n,(function(){return"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz"[Nn(62*Yn())]})).join("")},Fn=Wn(20),Qn=Promise.all.bind(Promise),$n="undefined"!=typeof window,ne=Object.entries,ee=Object.fromEntries,te=Object.keys,re=function(){},ae=function(n){return Error("".concat(Jn,": ").concat(n))},ue=new TextEncoder,oe=new TextDecoder,ie=function(n){return ue.encode(n)},ce=function(n){return oe.decode(n)},fe=function(n){return n.reduce((function(n,e){return n+e.toString(16).padStart(2,"0")}),"")},se=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.join("@")},le=JSON.stringify,de=JSON.parse,ve=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return n.split("").reduce((function(n,e){return n+e.charCodeAt(0)}),0)%e},pe={},ye=null,he=null,ge=function(){ye||(ye=new Promise((function(n){he=n})).finally((function(){he=null,ye=null})))},be=function(){return null==he?void 0:he()},me="AES-GCM",we={},ke=function(){var n=(0,T.default)((function(n,e){var t;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return t=Uint8Array.bind,[4,crypto.subtle.digest(n,ie(e))];case 1:return[2,new(t.apply(Uint8Array,[void 0,r.sent()]))]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Ae=function(){var n=(0,T.default)((function(n){var e,t;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return(e=(u=we)[o=n])?[3,2]:(t=Array.from,[4,ke("SHA-1",n)]);case 1:e=u[o]=t.apply(Array,[r.sent()]).map((function(n){return n.toString(36)})).join(""),r.label=2;case 2:return[2,e]}}))}));return function(e){return n.apply(this,arguments)}}(),_e=function(){var n=(0,T.default)((function(n,e){var t,r,a,u,o,i;return(0,I.__generator)(this,(function(c){switch(c.label){case 0:return t=crypto.getRandomValues(new Uint8Array(16)),a=t.join(",")+"$",o=(u=crypto.subtle).encrypt,i=[{name:me,iv:t}],[4,n];case 1:return[4,o.apply(u,i.concat([c.sent(),ie(e)]))];case 2:return[2,a+(r=c.sent(),btoa(String.fromCharCode.apply(null,new Uint8Array(r))))]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Te=function(){var n=(0,T.default)((function(n,e){var t,r,a,u,o,i;return(0,I.__generator)(this,(function(c){switch(c.label){case 0:return t=(0,U.default)(e.split("$"),2),r=t[0],a=t[1],o=(u=crypto.subtle).decrypt,i=[{name:me,iv:new Uint8Array(r.split(","))}],[4,n];case 1:return[4,o.apply(u,i.concat([c.sent(),function(n){var e=atob(n);return new Uint8Array(e.length).map((function(n,t){return e.charCodeAt(t)})).buffer}(a)]))];case 2:return[2,ce.apply(void 0,[c.sent()])]}}))}));return function(e,t){return n.apply(this,arguments)}}(),xe="icegatheringstatechange",Pe="offer",Se=function(n,e){var t=e.rtcConfig,r=e.rtcPolyfill,a=e.turnConfig,u=new(r||RTCPeerConnection)((0,E.default)({iceServers:Ee.concat(a||[])},t)),o={},i=!1,c=!1,f=null,s=function(n){n.binaryType="arraybuffer",n.bufferedAmountLowThreshold=65535,n.onmessage=function(n){var e;return null===(e=o.data)||void 0===e?void 0:e.call(o,n.data)},n.onopen=function(){var n;return null===(n=o.connect)||void 0===n?void 0:n.call(o)},n.onclose=function(){var n;return null===(n=o.close)||void 0===n?void 0:n.call(o)},n.onerror=function(n){var e;return null===(e=o.error)||void 0===e?void 0:e.call(o,n)}},l=function(n){return Promise.race([new Promise((function(e){var t=function(){"complete"===n.iceGatheringState&&(n.removeEventListener(xe,t),e())};n.addEventListener(xe,t),t()})),new Promise((function(n){return setTimeout(n,5e3)}))]).then((function(){return{type:n.localDescription.type,sdp:n.localDescription.sdp.replace(/a=ice-options:trickle\s\n/g,"")}}))};return n?(f=u.createDataChannel("data"),s(f)):u.ondatachannel=function(n){var e=n.channel;f=e,s(e)},u.onnegotiationneeded=(0,T.default)((function(){var n,e,t,r;return(0,I.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),i=!0,[4,u.setLocalDescription()];case 1:return a.sent(),[4,l(u)];case 2:return e=a.sent(),null===(n=o.signal)||void 0===n||n.call(o,e),[3,5];case 3:return t=a.sent(),null===(r=o.error)||void 0===r||r.call(o,t),[3,5];case 4:return i=!1,[7];case 5:return[2]}}))})),u.onconnectionstatechange=function(){var n;["disconnected","failed","closed"].includes(u.connectionState)&&(null===(n=o.close)||void 0===n||n.call(o))},u.ontrack=function(n){var e,t;null===(e=o.track)||void 0===e||e.call(o,n.track,n.streams[0]),null===(t=o.stream)||void 0===t||t.call(o,n.streams[0])},u.onremovestream=function(n){var e;return null===(e=o.stream)||void 0===e?void 0:e.call(o,n.stream)},n&&(u.canTrickleIceCandidates||u.onnegotiationneeded()),{created:Date.now(),connection:u,get channel(){return f},get isDead(){return"closed"===u.connectionState},signal:function(e){return(0,T.default)((function(){var t,r,a,s,d;return(0,I.__generator)(this,(function(v){switch(v.label){case 0:if("open"===(null==f?void 0:f.readyState)&&!(null===(t=e.sdp)||void 0===t?void 0:t.includes("a=rtpmap")))return[3,14];v.label=1;case 1:return v.trys.push([1,13,,14]),e.type!==Pe?[3,8]:i||"stable"!==u.signalingState&&!c?n?[2]:[4,Qn([u.setLocalDescription({type:"rollback"}),u.setRemoteDescription(e)])]:[3,3];case 2:return v.sent(),[3,5];case 3:return[4,u.setRemoteDescription(e)];case 4:v.sent(),v.label=5;case 5:return[4,u.setLocalDescription()];case 6:return v.sent(),[4,l(u)];case 7:return a=v.sent(),[2,(null===(r=o.signal)||void 0===r||r.call(o,a),a)];case 8:if("answer"!==e.type)return[3,12];c=!0,v.label=9;case 9:return v.trys.push([9,,11,12]),[4,u.setRemoteDescription(e)];case 10:return v.sent(),[3,12];case 11:return c=!1,[7];case 12:return[3,14];case 13:return s=v.sent(),null===(d=o.error)||void 0===d||d.call(o,s),[3,14];case 14:return[2]}}))}))()},sendData:function(n){return f.send(n)},destroy:function(){null==f||f.close(),u.close(),i=!1,c=!1},setHandlers:function(n){return Object.assign(o,n)},offerPromise:n?new Promise((function(n){return o.signal=function(e){e.type===Pe&&n(e)}})):Promise.resolve(),addStream:function(n){return n.getTracks().forEach((function(e){return u.addTrack(e,n)}))},removeStream:function(n){return u.getSenders().filter((function(e){return n.getTracks().includes(e.track)})).forEach((function(n){return u.removeTrack(n)}))},addTrack:function(n,e){return u.addTrack(n,e)},removeTrack:function(n){var e=u.getSenders().find((function(e){return e.track===n}));e&&u.removeTrack(e)},replaceTrack:function(n,e){var t=u.getSenders().find((function(e){return e.track===n}));if(t)return t.replaceTrack(e)}}},Ee=(0,L.default)(zn(3,(function(n,e){return"stun:stun".concat(e||"",".l.google.com:19302")}))).concat(["stun:stun.cloudflare.com:3478"]).map((function(n){return{urls:n}})),Ce=Object.getPrototypeOf(Uint8Array),Ue=16369,Le=255,De="bufferedamountlow",Ie=function(n){return"@_"+n},Oe={},je="EVENT",Re=Kn.keygen(),He=Re.secretKey,Be=Re.publicKey,Me=fe(Be),Ve={},qe={},Ke={},Ze=function(){return Math.floor(Date.now()/1e3)},Xe=function(n){return null!==(gn=(y=Ke)[h=n])&&void 0!==gn?gn:y[h]=ve(n,1e4)+2e4},Ne=function(){var n=(0,T.default)((function(n,e){var t,r,a,u,o;return(0,I.__generator)(this,(function(i){switch(i.label){case 0:return t={kind:Xe(n),tags:[["x",n]],created_at:Ze(),content:e,pubkey:Me},[4,ke("SHA-256",le([0,t.pubkey,t.created_at,t.kind,t.tags,t.content]))];case 1:return r=i.sent(),a=[je],u=[(0,E.default)({},t)],o={id:fe(r)},[4,Kn.signAsync(r,He)];case 2:return[2,le.apply(void 0,[a.concat([C.default.apply(void 0,u.concat([(o.sig=fe.apply(void 0,[i.sent()]),o)]))])])]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Ye=function(n,e){return Ve[n]=e,le(["REQ",n,{kinds:[Xe(e)],since:Ze(),"#x":[e]}])},Ge=function(n){return delete Ve[n],le(["CLOSE",n])},Je=function(n){var e,t,r,a,u=n.init,o=n.subscribe,y=n.announce,h={},k=!1;return function(n,A,_){var x,P,S=n.appId;if(null===(P=h[S])||void 0===P?void 0:P[A])return h[S][A];var O={},j={},R=se(Jn,S,A),H=Ae(R),B=Ae(se(R,Fn)),M=function(){var n=(0,T.default)((function(n,e,t){var r,a,u;return(0,I.__generator)(this,(function(o){switch(o.label){case 0:return a=(r=crypto.subtle).importKey,u=["raw"],[4,crypto.subtle.digest({name:"SHA-256"},ie("".concat(n,":").concat(e,":").concat(t)))];case 1:return[2,a.apply(r,u.concat([o.sent(),{name:me},!1,["encrypt","decrypt"]]))]}}))}));return function(e,t,r){return n.apply(this,arguments)}}()(n.password||"",S,A),V=function(n){return function(){var e=(0,T.default)((function(e){var t;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return t={type:e.type},[4,n(M,e.sdp)];case 1:return[2,(t.sdp=r.sent(),t)]}}))}));return function(n){return e.apply(this,arguments)}}()},q=V(Te),K=V(_e),Z=function(){return Se(!0,n)},X=function(n,e,t){var r;j[e]?j[e]!==n&&n.destroy():(j[e]=n,$(n,e),null===(r=O[e])||void 0===r||r.forEach((function(n,e){e!==t&&n.destroy()})),delete O[e])},N=function(n,e){j[e]===n&&delete j[e]},Y=function(n){return(x=t).push.apply(x,(0,L.default)(zn(n,Z))),Qn(t.splice(0,n).map((function(n){return n.offerPromise.then(K).then((function(e){return{peer:n,offer:e}}))})))},G=function(e,t){return null==_?void 0:_({error:"incorrect password (".concat(n.password,") when decrypting ").concat(t),appId:S,peerId:e,roomId:A})},J=function(e){return function(){var t=(0,T.default)((function(t,r,a){var u,o,i,c,f,s,l,d,v,p,y,h,m,w,k,A,_,T,x,P,S,E,C,L,D,M;return(0,I.__generator)(this,(function(I){switch(I.label){case 0:return[4,Qn([H,B])];case 1:if(u=U.default.apply(void 0,[I.sent(),2]),o=u[0],i=u[1],t!==o&&t!==i)return[2];if(c="string"==typeof r?de(r):r,f=c.peerId,s=c.offer,l=c.answer,d=c.peer,f===Fn||j[f])return[3,16];if(f&&!s&&!l)return[3,14];if(!s)return[3,8];if((null===(v=O[f])||void 0===v?void 0:v[e])&&Fn>f)return[2];(p=Se(!1,n)).setHandlers({connect:function(){return X(p,f,e)},close:function(){return N(p,f)}}),I.label=2;case 2:return I.trys.push([2,4,,5]),[4,q(s)];case 3:return y=I.sent(),[3,5];case 4:return I.sent(),[2,void G(f,"offer")];case 5:return p.isDead?[2]:[4,Qn([Ae(se(R,f)),p.signal(y)])];case 6:return h=U.default.apply(void 0,[I.sent(),2]),m=h[0],w=h[1],k=[m],A={peerId:Fn},[4,K(w)];case 7:return a.apply(void 0,k.concat([le.apply(void 0,[(A.answer=I.sent(),A)])])),[3,13];case 8:if(!l)return[3,13];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,q(l)];case 10:return _=I.sent(),[3,12];case 11:return I.sent(),[2,void G(f,"answer")];case 12:d?(d.setHandlers({connect:function(){return X(d,f,e)},close:function(){return N(d,f)}}),d.signal(_)):(x=null===(T=O[f])||void 0===T?void 0:T[e])&&!x.isDead&&x.signal(_),I.label=13;case 13:return[3,16];case 14:return(null===(P=O[f])||void 0===P?void 0:P[e])?[2]:[4,Qn([Y(1),Ae(se(R,f))])];case 15:S=U.default.apply(void 0,[I.sent(),2]),E=(0,U.default)(S[0],1),C=E[0],L=C.peer,D=C.offer,M=S[1],(g=O)[b=f]||(g[b]=[]),O[f][e]=L,setTimeout((function(){return function(n,e){var t;if(!j[n]){var r=null===(t=O[n])||void 0===t?void 0:t[e];r&&(delete O[n][e],r.destroy())}}(f,e)}),.9*W[e]),L.setHandlers({connect:function(){return X(L,f,e)},close:function(){return N(L,f)}}),a(M,le({peerId:Fn,offer:D})),I.label=16;case 16:return[2]}}))}));return function(n,e,r){return t.apply(this,arguments)}}()};if(!n)throw ae("requires a config map as the first argument");if(!S&&!n.firebaseApp)throw ae("config map is missing appId field");if(!A)throw ae("roomId argument required");if(!k){var z=u(n);t=zn(20,Z),e=Array.isArray(z)?z:[z],k=!0,r=setInterval((function(){return t=t.filter((function(n){var e=Date.now()-n.created<57333;return e||n.destroy(),e}))}),59052.99),a=n.manualRelayReconnection?re:function(){if($n){var n=new AbortController;return addEventListener("online",be,{signal:n.signal}),addEventListener("offline",ge,{signal:n.signal}),function(){return n.abort()}}return re}()}var W=e.map((function(){return 5333})),F=[],Q=e.map(function(){var n=(0,T.default)((function(n,e){var t;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return[4,n];case 1:return t=[r.sent()],[4,H];case 2:return t=t.concat(r.sent()),[4,B];case 3:return[2,o.apply(void 0,t.concat([r.sent(),J(e),Y]))]}}))}));return function(e,t){return n.apply(this,arguments)}}());Qn([H,B]).then((function(n){var t=(0,U.default)(n,2),r=t[0],a=t[1],u=function(){var n=(0,T.default)((function(n,e){var t;return(0,I.__generator)(this,(function(o){switch(o.label){case 0:return[4,y(n,r,a)];case 1:return"number"==typeof(t=o.sent())&&(W[e]=t),F[e]=setTimeout((function(){return u(n,e)}),W[e]),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}();Q.forEach(function(){var n=(0,T.default)((function(n,t){return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return[4,n];case 1:return r.sent(),[4,e[t]];case 2:return u.apply(void 0,[r.sent(),t]),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}())}));var $=re;return(m=h)[w=S]||(m[w]={}),h[S][A]=function(n,e,t){var r={},a={},u={},o={},y={},h={},g={},b={onPeerJoin:re,onPeerLeave:re,onPeerStream:re,onPeerTrack:re},m=function(n,e){return(n?Array.isArray(n)?n:[n]:te(r)).flatMap((function(n){var t=r[n];return t?e(n,t):(console.warn("".concat(Jn,": no peer with id ").concat(n," found")),[])}))},w=function(n){r[n]&&(r[n].destroy(),delete r[n],delete o[n],delete y[n],b.onPeerLeave(n),e(n))},k=function(n){if(a[n])return u[n];if(!n)throw ae("action type argument is required");var e=ie(n);if(e.byteLength>12)throw ae('action type string "'.concat(n,'" (').concat(e.byteLength,"b) exceeds byte limit (12). Hint: choose a shorter name."));var t=new Uint8Array(12);t.set(e);var o=0;return a[n]={onComplete:re,onProgress:re,setOnComplete:function(e){return a[n]=(0,C.default)((0,E.default)({},a[n]),{onComplete:e})},setOnProgress:function(e){return a[n]=(0,C.default)((0,E.default)({},a[n]),{onProgress:e})},send:function(n,e,a,u){return(0,T.default)((function(){var i,c,f,s,l,d,v,p,y,h,g;return(0,I.__generator)(this,(function(b){switch(b.label){case 0:if(a&&"object"!=typeof a)throw ae("action meta argument must be an object");if("undefined"===(i=void 0===n?"undefined":(0,D.default)(n)))throw ae("action data cannot be undefined");if(c="string"!==i,f=n instanceof Blob,s=f||n instanceof ArrayBuffer||n instanceof Ce,a&&!s)throw ae("action meta argument can only be used with binary data");return s?(h=Uint8Array.bind,f?[4,n.arrayBuffer()]:[3,2]):[3,4];case 1:return g=b.sent(),[3,3];case 2:g=n,b.label=3;case 3:return y=new(h.apply(Uint8Array,[void 0,g])),[3,5];case 4:y=ie(c?le(n):n),b.label=5;case 5:return l=y,d=a?ie(le(a)):null,v=Math.ceil(l.byteLength/Ue)+(a?1:0)||1,p=zn(v,(function(n,e){var r=e===v-1,u=a&&0===e,i=new Uint8Array(15+(u?d.byteLength:r?l.byteLength-Ue*(v-(a?2:1)):Ue));return i.set(t),i.set([o],12),i.set([r|u<<1|s<<2|c<<3],13),i.set([Math.round((e+1)/v*Le)],14),i.set(a?u?d:l.subarray((e-1)*Ue,e*Ue):l.subarray(e*Ue,(e+1)*Ue),15),i})),[2,(o=o+1&Le,Qn(m(e,function(){var n=(0,T.default)((function(n,e){var t,o,i;return(0,I.__generator)(this,(function(c){switch(c.label){case 0:t=e.channel,o=0,c.label=1;case 1:return o<v?(i=p[o],t.bufferedAmount>t.bufferedAmountLowThreshold?[4,new Promise((function(n){var e=function(){t.removeEventListener(De,e),n()};t.addEventListener(De,e)}))]:[3,3]):[3,5];case 2:c.sent(),c.label=3;case 3:if(!r[n])return[3,5];e.sendData(i),o++,null==u||u(i[14]/Le,n,a),c.label=4;case 4:return[3,1];case 5:return[2]}}))}));return function(e,t){return n.apply(this,arguments)}}())))]}}))}))()}},(i=u)[c=n]||(i[c]=[a[n].send,a[n].setOnComplete,a[n].setOnProgress])},A=function(){var n=(0,T.default)((function(){return(0,I.__generator)(this,(function(n){switch(n.label){case 0:return[4,N("")];case 1:return n.sent(),[4,new Promise((function(n){return setTimeout(n,99)}))];case 2:return n.sent(),ne(r).forEach((function(n){var e=(0,U.default)(n,2),t=e[0];e[1].destroy(),delete r[t]})),t(),[2]}}))}));return function(){return n.apply(this,arguments)}}(),_=(0,U.default)(k(Ie("ping")),2),x=_[0],P=_[1],S=(0,U.default)(k(Ie("pong")),2),L=S[0],O=S[1],j=(0,U.default)(k(Ie("signal")),2),R=j[0],H=j[1],B=(0,U.default)(k(Ie("stream")),2),M=B[0],V=B[1],q=(0,U.default)(k(Ie("track")),2),K=q[0],Z=q[1],X=(0,U.default)(k(Ie("leave")),2),N=X[0],Y=X[1];return $=function(n,e){r[e]||(r[e]=n,n.setHandlers({data:function(n){return function(n,e){var t=new Uint8Array(e),r=ce(t.subarray(0,12)).replaceAll("\0",""),u=(0,U.default)(t.subarray(12,13),1)[0],i=(0,U.default)(t.subarray(13,14),1)[0],c=(0,U.default)(t.subarray(14,15),1)[0],y=t.subarray(15),h=!!(1&i),g=!!(2&i),b=!!(4&i),m=!!(8&i);if(a[r]){(f=o)[s=n]||(f[s]={}),(l=o[n])[d=r]||(l[d]={});var w=(v=o[n][r])[p=u]||(v[p]={chunks:[]});if(g?w.meta=de(ce(y)):w.chunks.push(y),a[r].onProgress(c/Le,n,w.meta),h){var k=new Uint8Array(w.chunks.reduce((function(n,e){return n+e.byteLength}),0));if(w.chunks.reduce((function(n,e){return k.set(e,n),n+e.byteLength}),0),delete o[n][r][u],b)a[r].onComplete(k,n,w.meta);else{var A=ce(k);a[r].onComplete(m?de(A):A,n)}}}else console.warn("".concat(Jn,": received message with unregistered type (").concat(r,")"))}(e,n)},stream:function(n){b.onPeerStream(n,e,h[e]),delete h[e]},track:function(n,t){b.onPeerTrack(n,t,e,g[e]),delete g[e]},signal:function(n){return R(n,e)},close:function(){return w(e)},error:function(n){console.error(n),w(e)}}),b.onPeerJoin(e))},P((function(n,e){return L("",e)})),O((function(n,e){var t;null===(t=y[e])||void 0===t||t.call(y),delete y[e]})),H((function(n,e){var t;return null===(t=r[e])||void 0===t?void 0:t.signal(n)})),V((function(n,e){return h[e]=n})),Z((function(n,e){return g[e]=n})),Y((function(n,e){return w(e)})),$n&&addEventListener("beforeunload",A),{makeAction:k,leave:A,ping:function(n){return(0,T.default)((function(){var e;return(0,I.__generator)(this,(function(t){switch(t.label){case 0:if(!n)throw ae("ping() must be called with target peer ID");return e=Date.now(),x("",n),[4,new Promise((function(e){return y[n]=e}))];case 1:return[2,(t.sent(),Date.now()-e)]}}))}))()},getPeers:function(){return ee(ne(r).map((function(n){var e=(0,U.default)(n,2);return[e[0],e[1].connection]})))},addStream:function(n,e,t){return m(e,function(){var e=(0,T.default)((function(e,r){return(0,I.__generator)(this,(function(a){switch(a.label){case 0:return t?[4,M(t,e)]:[3,2];case 1:a.sent(),a.label=2;case 2:return r.addStream(n),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}())},removeStream:function(n,e){return m(e,(function(e,t){return t.removeStream(n)}))},addTrack:function(n,e,t,r){return m(t,function(){var t=(0,T.default)((function(t,a){return(0,I.__generator)(this,(function(u){switch(u.label){case 0:return r?[4,K(r,t)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.addTrack(n,e),[2]}}))}));return function(n,e){return t.apply(this,arguments)}}())},removeTrack:function(n,e){return m(e,(function(e,t){return t.removeTrack(n)}))},replaceTrack:function(n,e,t,r){return m(t,function(){var t=(0,T.default)((function(t,a){return(0,I.__generator)(this,(function(u){switch(u.label){case 0:return r?[4,K(r,t)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.replaceTrack(n,e),[2]}}))}));return function(n,e){return t.apply(this,arguments)}}())},onPeerJoin:function(n){return b.onPeerJoin=n},onPeerLeave:function(n){return b.onPeerLeave=n},onPeerStream:function(n){return b.onPeerStream=n},onPeerTrack:function(n){return b.onPeerTrack=n}}}(0,(function(n){return delete j[n]}),(function(){delete h[S][A],F.forEach(clearTimeout),Q.forEach(function(){var n=(0,T.default)((function(n){return(0,I.__generator)(this,(function(e){switch(e.label){case 0:return[4,n];case 1:return[2,e.sent()()]}}))}));return function(e){return n.apply(this,arguments)}}()),clearInterval(r),a(),k=!1}))}}({init:function(n){return function(n,e,t){return(n.relayUrls||function(n,e){for(var t=(0,L.default)(n),r=function(){var n=1e4*Gn(e++);return n-Nn(n)},a=t.length;a;){var u,o=Nn(r()*a--);u=[t[o],t[a]],t[a]=u[0],t[o]=u[1]}return t}(e,ve(n.appId))).slice(0,n.relayUrls?n.relayUrls.length:n.relayRedundancy||5)}(n,ze).map((function(n){var e=function(n,e){var t={},r=function(){var a=new WebSocket(n);a.onclose=function(){var e;ye?ye.then(r):(null!==(e=(k=pe)[A=n])&&void 0!==e||(k[A]=3333),setTimeout(r,pe[n]),pe[n]*=2)},a.onmessage=function(n){return e(n.data)},t.socket=a,t.url=a.url,t.ready=new Promise((function(e){return a.onopen=function(){e(t),pe[n]=3333}})),t.send=function(n){1===a.readyState&&a.send(n)}};return r(),t}(n,(function(n){var t,r=(0,U.default)(de(n),4),a=r[0],u=r[1],o=r[2],i=r[3];if(a===je)null===(t=qe[u])||void 0===t||t.call(qe,Ve[u],o.content);else{var c="".concat(Jn,": relay failure from ").concat(e.url," - ");"NOTICE"===a?console.warn(c+u):"OK"!==a||o||console.warn(c+i)}}));return Oe[n]=e,e.ready}))},subscribe:function(n,e,t,r){var a=Wn(64),u=Wn(64);return qe[a]=qe[u]=function(e,t){return r(e,t,function(){var e=(0,T.default)((function(e,t){var r;return(0,I.__generator)(this,(function(a){switch(a.label){case 0:return r=n.send,[4,Ne(e,t)];case 1:return[2,r.apply(n,[a.sent()])]}}))}));return function(n,t){return e.apply(this,arguments)}}())},n.send(Ye(a,e)),n.send(Ye(u,t)),function(){n.send(Ge(a)),n.send(Ge(u)),delete qe[a],delete qe[u]}},announce:function(n,e){return(0,T.default)((function(){var t;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return t=n.send,[4,Ne(e,le({peerId:Fn}))];case 1:return[2,t.apply(n,[r.sent()])]}}))}))()}}),ze=["black.nostrcity.club","ftp.halifax.rwth-aachen.de/nostr","nos.lol","nostr.cool110.xyz","nostr.data.haus","nostr.sathoarder.com","nostr.vulpem.com","relay.agorist.space","relay.binaryrobot.com","relay.damus.io","relay.fountain.fm","relay.mostro.network","relay.nostraddress.com","relay.nostrdice.com","relay.nostromo.social","relay.oldenburg.cool","relay.verified-nostr.com","yabu.me/v2"].map((function(n){return"wss://"+n}))}))}();
