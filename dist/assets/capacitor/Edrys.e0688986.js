var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("apbN5",(function(t,s){var n,i,o,c;n=t.exports,i="Sync",o=function(){return l},Object.defineProperty(n,i,{get:o,set:c,enumerable:!0,configurable:!0});var d=e("2Xs1f"),r=e("5Owdb"),a=e("dOAsX");class l extends r.Sync{async connect(e){super.connect(e),this.init(!0)}destroy(){this.listener&&window.removeEventListener("message",this.listener),super.destroy()}init(e,t){if(e){this.subject=this.room||"liasync";let e=this;this.listener=function(t){try{let s=t.data;switch(s.subject){case"init":s.body&&(e.connected=!0,e.sendConnect());break;case"publish":s.body&&e.pubsubReceive(s.body);break;default:s.body&&e.applyUpdate((0,a.decode)(s.body))}}catch(e){console.warn("Edrys",e.message)}},window.addEventListener("message",this.listener),this.broadcast(!0,null,"init"),setTimeout((function(){e.connected||e.sendDisconnectError("This seems not to be an Edrys classroom")}),2e3)}}broadcast(e,t,s){let n=e?s||this.subject:"publish";window.parent.postMessage({subject:n,body:t?(0,a.encode)(t):null},"*")}constructor(...e){super(...e),(0,d.default)(this,"subject","liasync"),(0,d.default)(this,"connected",!1)}}}));