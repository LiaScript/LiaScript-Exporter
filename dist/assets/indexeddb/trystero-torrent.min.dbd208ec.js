!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("E0fFs",(function(n,r){var t,a;t=n.exports,a=function(){return Pe},Object.defineProperty(t,"joinRoom",{get:a,set:undefined,enumerable:!0,configurable:!0});var o,u,c,i,s,l,f,d,p,v,y,h,m,g,b,w,_,k,P,T=e("hnmIs"),A=e("bgoEC"),S=e("7j4mF"),E=e("5ENmm"),D=e("6Wo7Q"),L=e("rJmE6"),I=e("32Euv"),C=Math.floor,U=Math.random,j="Trystero",O=function(e,n){return Array(e).fill().map(n)},H=function(e){return O(e,(function(){return"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz"[C(62*U())]})).join("")},R=H(20),J=Promise.all.bind(Promise),M="undefined"!=typeof window,x=Object.entries,q=Object.fromEntries,N=Object.keys,B=function(){},F=function(e){return Error("".concat(j,": ").concat(e))},G=new TextEncoder,W=new TextDecoder,z=function(e){return G.encode(e)},K=function(e){return W.decode(e)},Q=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.join("@")},V=JSON.stringify,$=JSON.parse,X={},Y="AES-GCM",Z={},ee=(P=(0,T.default)((function(e){var n,r,t;return(0,I.__generator)(this,(function(a){switch(a.label){case 0:return(n=Z[e])?[3,2]:(r=Array.from,t=Uint8Array.bind,[4,crypto.subtle.digest("SHA-1",z(e))]);case 1:n=Z[e]=r.apply(Array,[new(t.apply(Uint8Array,[void 0,a.sent()]))]).map((function(e){return e.toString(36)})).join(""),a.label=2;case 2:return[2,n]}}))})),function(e){return P.apply(this,arguments)}),ne=function(){var e=(0,T.default)((function(e,n){var r,t,a,o,u,c;return(0,I.__generator)(this,(function(i){switch(i.label){case 0:return r=crypto.getRandomValues(new Uint8Array(16)),a=r.join(",")+"$",u=(o=crypto.subtle).encrypt,c=[{name:Y,iv:r}],[4,e];case 1:return[4,u.apply(o,c.concat([i.sent(),z(n)]))];case 2:return[2,a+(t=i.sent(),btoa(String.fromCharCode.apply(null,new Uint8Array(t))))]}}))}));return function(n,r){return e.apply(this,arguments)}}(),re=function(){var e=(0,T.default)((function(e,n){var r,t,a,o,u,c;return(0,I.__generator)(this,(function(i){switch(i.label){case 0:return r=(0,E.default)(n.split("$"),2),t=r[0],a=r[1],u=(o=crypto.subtle).decrypt,c=[{name:Y,iv:new Uint8Array(t.split(","))}],[4,e];case 1:return[4,u.apply(o,c.concat([i.sent(),function(e){var n=atob(e);return new Uint8Array(n.length).map((function(e,r){return n.charCodeAt(r)})).buffer}(a)]))];case 2:return[2,K.apply(void 0,[i.sent()])]}}))}));return function(n,r){return e.apply(this,arguments)}}(),te="icegatheringstatechange",ae=function(e){return e.replace(/a=ice-options:trickle\s\n/g,"")},oe=function(e,n){var r=n.rtcConfig,t=n.rtcPolyfill,a=n.turnConfig,o=new(t||RTCPeerConnection)((0,A.default)({iceServers:ue.concat(a||[])},r)),u={},c=function(e){e.binaryType="arraybuffer",e.bufferedAmountLowThreshold=65535,e.onmessage=function(e){var n;return null===(n=u.data)||void 0===n?void 0:n.call(u,e.data)},e.onopen=function(){var e;return null===(e=u.connect)||void 0===e?void 0:e.call(u)},e.onclose=function(){var e;return null===(e=u.close)||void 0===e?void 0:e.call(u)},e.onerror=function(e){var n;return null===(n=u.error)||void 0===n?void 0:n.call(u,e)}},i=function(){var e=(0,T.default)((function(e){return(0,I.__generator)(this,(function(n){switch(n.label){case 0:if(!e.localDescription)throw Error("No local description available");return[4,Promise.race([new Promise((function(n){var r=function(){"complete"===e.iceGatheringState&&(e.removeEventListener(te,r),n())};e.addEventListener(te,r),r()})),new Promise((function(e){return setTimeout(e,5e3)}))])];case 1:return[2,(n.sent(),{type:e.localDescription.type,sdp:ae(e.localDescription.sdp)})]}}))}));return function(n){return e.apply(this,arguments)}}(),s=!1,l=null;return e?(l=o.createDataChannel("data"),c(l)):o.ondatachannel=function(e){var n=e.channel;l=n,c(n)},o.onnegotiationneeded=(0,T.default)((function(){var e,n,r,t;return(0,I.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),s=!0,[4,o.setLocalDescription()];case 1:return a.sent(),[4,i(o)];case 2:return n=a.sent(),null===(e=u.signal)||void 0===e||e.call(u,{type:n.type,sdp:ae(n.sdp)}),[3,5];case 3:return r=a.sent(),null===(t=u.error)||void 0===t||t.call(u,r),[3,5];case 4:return s=!1,[7];case 5:return[2]}}))})),o.onconnectionstatechange=function(){var e;["disconnected","failed","closed"].includes(o.connectionState)&&(null===(e=u.close)||void 0===e||e.call(u))},o.ontrack=function(e){var n,r;null===(n=u.track)||void 0===n||n.call(u,e.track,e.streams[0]),null===(r=u.stream)||void 0===r||r.call(u,e.streams[0])},o.onremovestream=function(e){var n;null===(n=u.stream)||void 0===n||n.call(u,e.stream,{removed:!0})},{created:Date.now(),connection:o,get channel(){return l},get isDead(){return"closed"===o.connectionState},signal:function(n){return(0,T.default)((function(){var r,t,a,c,f,d,p,v;return(0,I.__generator)(this,(function(y){switch(y.label){case 0:if("open"===(null==l?void 0:l.readyState))return[3,10];y.label=1;case 1:return y.trys.push([1,8,,9]),"offer"!==n.type?[3,5]:!s&&"stable"===o.signalingState||e?[4,o.setRemoteDescription(n)]:[2];case 2:return y.sent(),[4,o.setLocalDescription()];case 3:return y.sent(),[4,i(o)];case 4:return t=y.sent(),a=ae(t.sdp),[2,(null===(r=u.signal)||void 0===r||r.call(u,{type:t.type,sdp:a}),{type:t.type,sdp:a})];case 5:return"answer"!==n.type||"have-local-offer"!==o.signalingState&&"have-remote-offer"!==o.signalingState?[3,7]:[4,o.setRemoteDescription(n)];case 6:y.sent(),y.label=7;case 7:return[3,9];case 8:return c=y.sent(),null===(f=u.error)||void 0===f||f.call(u,c),[3,9];case 9:return[3,15];case 10:return(d="offer"===n.type||"stable"!==o.signalingState)?[4,o.setRemoteDescription(n)]:[3,12];case 11:y.sent(),d="offer"===n.type,y.label=12;case 12:return d?[4,o.setLocalDescription()]:[3,15];case 13:return y.sent(),[4,i(o)];case 14:return v=y.sent(),[2,(null===(p=u.signal)||void 0===p||p.call(u,{type:v.type,sdp:v.sdp}),{type:v.type,sdp:v.sdp})];case 15:return[2]}}))}))()},sendData:function(e){return l.send(e)},destroy:function(){l&&l.close(),o.close()},setHandlers:function(e){return Object.assign(u,e)},offerPromise:e?new Promise((function(e){u.signal=function(n){"offer"===n.type&&e(n)}})):Promise.resolve(),addStream:function(e){e.getTracks().forEach((function(n){return o.addTrack(n,e)}))},removeStream:function(e){o.getSenders().filter((function(n){return e.getTracks().includes(n.track)})).forEach((function(e){return o.removeTrack(e)}))},addTrack:function(e,n){return o.addTrack(e,n)},removeTrack:function(e){var n=o.getSenders().find((function(n){return n.track===e}));n&&o.removeTrack(n)},replaceTrack:function(e,n){return(0,T.default)((function(){var r;return(0,I.__generator)(this,(function(t){switch(t.label){case 0:return r=o.getSenders().find((function(n){return n.track===e})),r?[4,r.replaceTrack(n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))()}}},ue=(0,D.default)(O(3,(function(e,n){return"stun:stun".concat(n||"",".l.google.com:19302")}))).concat(["stun:global.stun.twilio.com:3478"]).map((function(e){return{urls:e}})),ce=Object.getPrototypeOf(Uint8Array),ie=16369,se=255,le="bufferedamountlow",fe=function(e){return"@_"+e},de={},pe={},ve={},ye={},he={},me={},ge={},be={},we=function(){var e=(0,T.default)((function(e){var n;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return pe[e]?[2,pe[e]]:[4,ee(e)];case 1:return n=r.sent().slice(0,20),[2,(pe[e]=n,ve[n]=e,n)]}}))}));return function(n){return e.apply(this,arguments)}}(),_e=function(){var e=(0,T.default)((function(e,n,r){var t,a;return(0,I.__generator)(this,(function(o){switch(o.label){case 0:return t=e.send,a={action:"announce"},[4,we(n)];case 1:return[2,t.apply(e,[V.apply(void 0,[A.default.apply(void 0,[(a.info_hash=o.sent(),a.peer_id=R,a),r])])])]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),ke=function(e,n,r){return console.warn("".concat(j,": torrent tracker ").concat(r?"failure":"warning"," from ").concat(e," - ").concat(n))},Pe=function(e){var n,r,t,a=e.init,m=e.subscribe,g=e.announce,b={},w=!1;return function(e,_,k){var P,C,U=e.appId;if(null===(C=b[U])||void 0===C?void 0:C[_])return b[U][_];var H={},G={},W=Q(j,U,_),X=ee(W),Z=ee(Q(W,R)),te=function(){var e=(0,T.default)((function(e,n,r){var t,a,o;return(0,I.__generator)(this,(function(u){switch(u.label){case 0:return a=(t=crypto.subtle).importKey,o=["raw"],[4,crypto.subtle.digest({name:"SHA-256"},z("".concat(e,":").concat(n,":").concat(r)))];case 1:return[2,a.apply(t,o.concat([u.sent(),{name:Y},!1,["encrypt","decrypt"]]))]}}))}));return function(n,r,t){return e.apply(this,arguments)}}()(e.password||"",U,_),ae=function(e){return function(){var n=(0,T.default)((function(n){var r;return(0,I.__generator)(this,(function(t){switch(t.label){case 0:return r={type:n.type},[4,e(te,n.sdp)];case 1:return[2,(r.sdp=t.sent(),r)]}}))}));return function(e){return n.apply(this,arguments)}}()},ue=ae(re),de=ae(ne),pe=function(){return oe(!0,e)},ve=function(e,n,r){var t;G[n]?G[n]!==e&&e.destroy():(G[n]=e,Pe(e,n),null===(t=H[n])||void 0===t||t.forEach((function(e,n){n!==r&&e.destroy()})),delete H[n])},ye=function(e,n){G[n]===e&&delete G[n]},he=function(e){return(P=r).push.apply(P,(0,D.default)(O(e,pe))),J(r.splice(0,e).map((function(e){return e.offerPromise.then(de).then((function(n){return{peer:e,offer:n}}))})))},me=function(n,r){return null==k?void 0:k({error:"incorrect password (".concat(e.password,") when decrypting ").concat(r),appId:U,peerId:n,roomId:_})},ge=function(n){return function(){var r=(0,T.default)((function(r,t,a){var c,i,s,l,f,d,p,v,y,h,m,g,b,w,_,k,P,T,A,S,D,L,C,U,j,O;return(0,I.__generator)(this,(function(I){switch(I.label){case 0:return[4,J([X,Z])];case 1:if(c=E.default.apply(void 0,[I.sent(),2]),i=c[0],s=c[1],r!==i&&r!==s)return[2];if(l="string"==typeof t?$(t):t,f=l.peerId,d=l.offer,p=l.answer,v=l.peer,f===R||G[f])return[3,16];if(f&&!d&&!p)return[3,14];if(!d)return[3,8];if((null===(y=H[f])||void 0===y?void 0:y[n])&&R>f)return[2];(h=oe(!1,e)).setHandlers({connect:function(){return ve(h,f,n)},close:function(){return ye(h,f)}}),I.label=2;case 2:return I.trys.push([2,4,,5]),[4,ue(d)];case 3:return m=I.sent(),[3,5];case 4:return I.sent(),[2,void me(f,"offer")];case 5:return h.isDead?[2]:[4,J([ee(Q(W,f)),h.signal(m)])];case 6:return g=E.default.apply(void 0,[I.sent(),2]),b=g[0],w=g[1],_=[b],k={peerId:R},[4,de(w)];case 7:return a.apply(void 0,_.concat([V.apply(void 0,[(k.answer=I.sent(),k)])])),[3,13];case 8:if(!p)return[3,13];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,ue(p)];case 10:return P=I.sent(),[3,12];case 11:return I.sent(),[2,void me(f,"answer")];case 12:v?(v.setHandlers({connect:function(){return ve(v,f,n)},close:function(){return ye(v,f)}}),v.signal(P)):(A=null===(T=H[f])||void 0===T?void 0:T[n])&&!A.isDead&&A.signal(P),I.label=13;case 13:return[3,16];case 14:return(null===(S=H[f])||void 0===S?void 0:S[n])?[2]:[4,J([he(1),ee(Q(W,f))])];case 15:D=E.default.apply(void 0,[I.sent(),2]),L=(0,E.default)(D[0],1),C=L[0],U=C.peer,j=C.offer,O=D[1],(o=H)[u=f]||(o[u]=[]),H[f][n]=U,setTimeout((function(){return function(e,n){var r;if(!G[e]){var t=null===(r=H[e])||void 0===r?void 0:r[n];t&&(delete H[e][n],t.destroy())}}(f,n)}),.9*we[n]),U.setHandlers({connect:function(){return ve(U,f,n)},close:function(){return ye(U,f)}}),a(O,V({peerId:R,offer:j})),I.label=16;case 16:return[2]}}))}));return function(e,n,t){return r.apply(this,arguments)}}()};if(!e)throw F("requires a config map as the first argument");if(!U&&!e.firebaseApp)throw F("config map is missing appId field");if(!_)throw F("roomId argument required");if(!w){var be=a(e);r=O(20,pe),n=Array.isArray(be)?be:[be],w=!0,t=setInterval((function(){return r=r.filter((function(e){var n=Date.now()-e.created<57333;return n||e.destroy(),n}))}),59052.99)}var we=n.map((function(){return 5333})),_e=[],ke=n.map(function(){var e=(0,T.default)((function(e,n){var r;return(0,I.__generator)(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return r=[t.sent()],[4,X];case 2:return r=r.concat(t.sent()),[4,Z];case 3:return[2,m.apply(void 0,r.concat([t.sent(),ge(n),he]))]}}))}));return function(n,r){return e.apply(this,arguments)}}());J([X,Z]).then((function(e){var r=(0,E.default)(e,2),t=r[0],a=r[1],o=function(){var e=(0,T.default)((function(e,n){var r;return(0,I.__generator)(this,(function(u){switch(u.label){case 0:return[4,g(e,t,a)];case 1:return"number"==typeof(r=u.sent())&&(we[n]=r),_e[n]=setTimeout((function(){return o(e,n)}),we[n]),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}();ke.forEach(function(){var e=(0,T.default)((function(e,r){return(0,I.__generator)(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return t.sent(),[4,n[r]];case 2:return o.apply(void 0,[t.sent(),r]),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}())}));var Pe=B;return(c=b)[i=U]||(c[i]={}),b[U][_]=function(e,n,r){var t={},a={},o={},u={},c={},i={},m={},g={onPeerJoin:B,onPeerLeave:B,onPeerStream:B,onPeerTrack:B},b=function(e,n){return(e?Array.isArray(e)?e:[e]:N(t)).flatMap((function(e){var r=t[e];return r?n(e,r):(console.warn("".concat(j,": no peer with id ").concat(e," found")),[])}))},w=function(e){t[e]&&(delete t[e],delete u[e],delete c[e],g.onPeerLeave(e),n(e))},_=function(e){if(a[e])return o[e];if(!e)throw F("action type argument is required");var n=z(e);if(n.byteLength>12)throw F('action type string "'.concat(e,'" (').concat(n.byteLength,"b) exceeds byte limit (12). Hint: choose a shorter name."));var r=new Uint8Array(12);r.set(n);var u=0;return a[e]={onComplete:B,onProgress:B,setOnComplete:function(n){return a[e]=(0,S.default)((0,A.default)({},a[e]),{onComplete:n})},setOnProgress:function(n){return a[e]=(0,S.default)((0,A.default)({},a[e]),{onProgress:n})},send:function(e,n,a,o){return(0,T.default)((function(){var c,i,s,l,f,d,p,v,y,h,m;return(0,I.__generator)(this,(function(g){switch(g.label){case 0:if(a&&"object"!=typeof a)throw F("action meta argument must be an object");if("undefined"===(c=void 0===e?"undefined":(0,L.default)(e)))throw F("action data cannot be undefined");if(i="string"!==c,s=e instanceof Blob,l=s||e instanceof ArrayBuffer||e instanceof ce,a&&!l)throw F("action meta argument can only be used with binary data");return l?(h=Uint8Array.bind,s?[4,e.arrayBuffer()]:[3,2]):[3,4];case 1:return m=g.sent(),[3,3];case 2:m=e,g.label=3;case 3:return y=new(h.apply(Uint8Array,[void 0,m])),[3,5];case 4:y=z(i?V(e):e),g.label=5;case 5:return f=y,d=a?z(V(a)):null,p=Math.ceil(f.byteLength/ie)+(a?1:0)||1,v=O(p,(function(e,n){var t=n===p-1,o=a&&0===n,c=new Uint8Array(15+(o?d.byteLength:t?f.byteLength-ie*(p-(a?2:1)):ie));return c.set(r),c.set([u],12),c.set([t|o<<1|l<<2|i<<3],13),c.set([Math.round((n+1)/p*se)],14),c.set(a?o?d:f.subarray((n-1)*ie,n*ie):f.subarray(n*ie,(n+1)*ie),15),c})),[2,(u=u+1&se,J(b(n,function(){var e=(0,T.default)((function(e,n){var r,u,c;return(0,I.__generator)(this,(function(i){switch(i.label){case 0:r=n.channel,u=0,i.label=1;case 1:return u<p?(c=v[u],r.bufferedAmount>r.bufferedAmountLowThreshold?[4,new Promise((function(e){var n=function(){r.removeEventListener(le,n),e()};r.addEventListener(le,n)}))]:[3,3]):[3,5];case 2:i.sent(),i.label=3;case 3:if(!t[e])return[3,5];n.sendData(c),u++,null==o||o(c[14]/se,e,a),i.label=4;case 4:return[3,1];case 5:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}())))]}}))}))()}},(s=o)[l=e]||(s[l]=[a[e].send,a[e].setOnComplete,a[e].setOnProgress])},k=function(e,n){var r=new Uint8Array(n),t=K(r.subarray(0,12)).replaceAll("\0",""),o=(0,E.default)(r.subarray(12,13),1)[0],c=(0,E.default)(r.subarray(13,14),1)[0],i=(0,E.default)(r.subarray(14,15),1)[0],s=r.subarray(15),l=!!(1&c),m=!!(2&c),g=!!(4&c),b=!!(8&c);if(a[t]){(f=u)[d=e]||(f[d]={}),(p=u[e])[v=t]||(p[v]={});var w=(y=u[e][t])[h=o]||(y[h]={chunks:[]});if(m?w.meta=$(K(s)):w.chunks.push(s),a[t].onProgress(i/se,e,w.meta),l){var _=new Uint8Array(w.chunks.reduce((function(e,n){return e+n.byteLength}),0));if(w.chunks.reduce((function(e,n){return _.set(n,e),e+n.byteLength}),0),delete u[e][t][o],g)a[t].onComplete(_,e,w.meta);else{var k=K(_);a[t].onComplete(b?$(k):k,e)}}}else console.warn("".concat(j,": received message with unregistered type (").concat(t,")"))},P=function(){var e=(0,T.default)((function(){return(0,I.__generator)(this,(function(e){switch(e.label){case 0:return[4,oe("")];case 1:return e.sent(),[4,new Promise((function(e){return setTimeout(e,99)}))];case 2:return e.sent(),x(t).forEach((function(e){var n=(0,E.default)(e,2),r=n[0];n[1].destroy(),delete t[r]})),r(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),D=(0,E.default)(_(fe("ping")),2),C=D[0],U=D[1],H=(0,E.default)(_(fe("pong")),2),R=H[0],G=H[1],W=(0,E.default)(_(fe("signal")),2),Q=W[0],X=W[1],Y=(0,E.default)(_(fe("stream")),2),Z=Y[0],ee=Y[1],ne=(0,E.default)(_(fe("track")),2),re=ne[0],te=ne[1],ae=(0,E.default)(_(fe("leave")),2),oe=ae[0],ue=ae[1];return Pe=function(e,n){var r;t[n]||(t[n]=e,e.setHandlers({data:function(e){return k(n,e)},stream:function(e){g.onPeerStream(e,n,i[n]),delete i[n]},track:function(e,r){g.onPeerTrack(e,r,n,m[n]),delete m[n]},signal:function(e){return Q(e,n)},close:function(){return w(n)},error:function(){return w(n)}}),g.onPeerJoin(n),null===(r=e.drainEarlyData)||void 0===r||r.call(e,(function(e){return k(n,e)})))},U((function(e,n){return R("",n)})),G((function(e,n){var r;null===(r=c[n])||void 0===r||r.call(c),delete c[n]})),X((function(e,n){var r;return null===(r=t[n])||void 0===r?void 0:r.signal(e)})),ee((function(e,n){return i[n]=e})),te((function(e,n){return m[n]=e})),ue((function(e,n){return w(n)})),M&&addEventListener("beforeunload",P),{makeAction:_,leave:P,ping:function(e){return(0,T.default)((function(){var n;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:if(!e)throw F("ping() must be called with target peer ID");return n=Date.now(),C("",e),[4,new Promise((function(n){return c[e]=n}))];case 1:return[2,(r.sent(),Date.now()-n)]}}))}))()},getPeers:function(){return q(x(t).map((function(e){var n=(0,E.default)(e,2);return[n[0],n[1].connection]})))},addStream:function(e,n,r){return b(n,function(){var n=(0,T.default)((function(n,t){return(0,I.__generator)(this,(function(a){switch(a.label){case 0:return r?[4,Z(r,n)]:[3,2];case 1:a.sent(),a.label=2;case 2:return t.addStream(e),[2]}}))}));return function(e,r){return n.apply(this,arguments)}}())},removeStream:function(e,n){return b(n,(function(n,r){return r.removeStream(e)}))},addTrack:function(e,n,r,t){return b(r,function(){var r=(0,T.default)((function(r,a){return(0,I.__generator)(this,(function(o){switch(o.label){case 0:return t?[4,re(t,r)]:[3,2];case 1:o.sent(),o.label=2;case 2:return a.addTrack(e,n),[2]}}))}));return function(e,n){return r.apply(this,arguments)}}())},removeTrack:function(e,n,r){return b(r,(function(r,t){return t.removeTrack(e,n)}))},replaceTrack:function(e,n,r,t,a){return b(t,function(){var t=(0,T.default)((function(t,o){return(0,I.__generator)(this,(function(u){switch(u.label){case 0:return a?[4,re(a,t)]:[3,2];case 1:u.sent(),u.label=2;case 2:return o.replaceTrack(e,n,r),[2]}}))}));return function(e,n){return t.apply(this,arguments)}}())},onPeerJoin:function(e){return g.onPeerJoin=e},onPeerLeave:function(e){return g.onPeerLeave=e},onPeerStream:function(e){return g.onPeerStream=e},onPeerTrack:function(e){return g.onPeerTrack=e}}}(0,(function(e){return delete G[e]}),(function(){delete b[U][_],_e.forEach(clearTimeout),ke.forEach(function(){var e=(0,T.default)((function(e){return(0,I.__generator)(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return[2,n.sent()()]}}))}));return function(n){return e.apply(this,arguments)}}()),clearInterval(t)}))}}({init:function(e){return function(e,n,r){return(e.relayUrls||n).slice(0,e.relayUrls?e.relayUrls.length:e.relayRedundancy||3)}(e,Te).map((function(e){var n=function(e,n){var r={},t=function(){var a=new WebSocket(e);a.onclose=function(){var n;null!==(n=(m=X)[g=e])&&void 0!==n||(m[g]=3333),setTimeout(t,X[e]),X[e]*=2},a.onmessage=function(e){return n(e.data)},r.socket=a,r.url=a.url,r.ready=new Promise((function(n){return a.onopen=function(){n(r),X[e]=3333}})),r.send=function(e){1===a.readyState&&a.send(e)}};return t(),r}(e,(function(e){var n=$(e),t=n["failure reason"],a=n["warning message"],o=n.interval,u=ve[n.info_hash];if(t)ke(r,t,!0);else{var c,i;if(a&&ke(r,a),o&&1e3*o>me[r]&&he[r][u]){var s=Math.min(1e3*o,120333);clearInterval(ye[r][u]),me[r]=s,ye[r][u]=setInterval(he[r][u],s)}ge[n.offer_id]||(n.offer||n.answer)&&(ge[n.offer_id]=!0,null===(i=(c=be[r])[u])||void 0===i||i.call(c,n))}})),r=n.url;return de[r]=n,be[r]={},n.ready}))},subscribe:function(e,n,r,t,a){var o=e.url,u=function(){var r=(0,T.default)((function(){var r;return(0,I.__generator)(this,(function(o){switch(o.label){case 0:return[4,a(10)];case 1:return r=q.apply(void 0,[o.sent().map((function(e){return[H(20),e]}))]),be[e.url][n]=function(a){if(a.offer)t(n,{offer:a.offer,peerId:a.peer_id},(function(r,t){return _e(e,n,{answer:$(t).answer,offer_id:a.offer_id,to_peer_id:a.peer_id})}));else if(a.answer){var o=r[a.offer_id];o&&t(n,{answer:a.answer,peerId:a.peer_id,peer:o.peer})}},_e(e,n,{numwant:10,offers:x(r).map((function(e){var n=(0,E.default)(e,2);return{offer_id:n[0],offer:n[1].offer}}))}),[2]}}))}));return function(){return r.apply(this,arguments)}}();return me[o]=33333,(b=he)[w=o]||(b[w]={}),he[o][n]=u,(_=ye)[k=o]||(_[k]={}),ye[o][n]=setInterval(u,me[o]),u(),function(){clearInterval(ye[o][n]),delete be[o][n],delete he[o][n]}},announce:function(e){return me[e.url]}}),Te=(de,["tracker.webtorrent.dev","tracker.openwebtorrent.com","tracker.btorrent.xyz","tracker.files.fm:7073/announce"].map((function(e){return"wss://"+e})))}))}();
