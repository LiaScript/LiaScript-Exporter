var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("8b2wg",(function(n,t){var s,r,i,d;s=n.exports,r="Sync",i=function(){return p},Object.defineProperty(s,r,{get:i,set:d,enumerable:!0,configurable:!0});var o=e("1SurT"),a=e("e99Bg");class p extends a.Sync{destroy(){this.peerChannelEvent&&this.peerChannelEvent.close(),super.destroy()}connect(e){if(!window.beaker)return;super.connect(e),this.peerIds=new Set,this.peerEvent=window.beaker.peersockets.watch();let n=this;this.peerEvent.addEventListener("join",(e=>{n.peerIds.add(e.peerId)})),this.peerEvent.addEventListener("leave",(e=>{n.peerIds.delete(e.peerId),console.warn("LEAVE",e)}));const t=this.uniqueID();t&&(this.peerChannelEvent=window.beaker.peersockets.join(t),this.peerChannelEvent.addEventListener("message",(function(e){e.message&&n.applyUpdate(e.message)})),this.sendConnect())}broadcast(e){if(this.peerChannelEvent)for(let n of this.peerIds)this.peerChannelEvent.send(n,e)}constructor(...e){super(...e),(0,o.default)(this,"peerIds",new Set)}}}));