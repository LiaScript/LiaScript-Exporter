!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("1KlvB",(function(t,n){var o,a,s,i;o=t.exports,a="Sync",s=function(){return w},Object.defineProperty(o,a,{get:s,set:i,enumerable:!0,configurable:!0});var d=e("Yawv5"),u=e("2swew"),r=e("kxanC"),c=e("hWDD9"),l=e("dLRop"),f=e("61A8y"),y=e("5gj45"),b=e("cksMj"),p=e("giCK6"),h=e("eQNFO"),g=e("dDIEk"),v=e("bF0bi"),w=function(e){"use strict";(0,b.default)(n,e);var t=(0,p.default)(n);function n(){var e;return(0,r.default)(this,n),e=t.apply(this,arguments),(0,l.default)((0,d.default)(e),"subject","liasync"),(0,l.default)((0,d.default)(e),"connected",!1),e}return(0,c.default)(n,[{key:"connect",value:function(e){var t=this,o=this;return(0,u.default)((function(){return(0,h.__generator)(this,(function(a){return(0,f.default)((0,y.default)(n.prototype),"connect",t).call(o,e),o.init(!0),[2]}))}))()}},{key:"destroy",value:function(){(0,f.default)((0,y.default)(n.prototype),"destroy",this).call(this)}},{key:"init",value:function(e,t){if(e){this.subject=this.room||"liasync";var n=this;window.addEventListener("message",(function(e){try{var t=e.data;if("init"===t.subject)t.body&&(n.connected=!0,n.sendConnect());else t.body=JSON.parse(t.body),t.body.message.param.id!==n.token&&t.body&&n.applyUpdate((0,v.decode)(t.body))}catch(e){console.warn("Edrys",e.message)}})),window.parent.postMessage({subject:"init",body:""},"*"),setTimeout((function(){n.connected||n.sendDisconnectError("This seems not to be an Edrys classroom")}),2e3)}}},{key:"broadcast",value:function(e){window.parent.postMessage({subject:this.subject,body:e?(0,v.encode)(e):null},"*")}}]),n}(g.Sync)}))}();