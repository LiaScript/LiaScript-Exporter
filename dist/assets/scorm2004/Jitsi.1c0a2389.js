!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("9c9W2",(function(n,t){var o,i,c,s;o=n.exports,i="Sync",c=function(){return p},Object.defineProperty(o,i,{get:c,set:s,enumerable:!0,configurable:!0});var r=e("f1evb"),a=e("hnmIs"),d=e("9Klpk"),u=e("3bWnf"),f=e("eT7f3"),l=e("9WzNc"),w=e("div3d"),v=e("kb0qF"),J=e("bWNdT"),h=e("32Euv"),E=e("auvHb"),p=function(e){"use strict";(0,v.default)(t,e);var n=(0,J.default)(t);function t(){var e;return(0,d.default)(this,t),e=n.apply(this,arguments),(0,f.default)((0,r.default)(e),"users",{}),e}return(0,u.default)(t,[{key:"destroy",value:function(){var e;null===(e=this.connection)||void 0===e||e.disconnect(),(0,l.default)((0,w.default)(t.prototype),"destroy",this).call(this)}},{key:"connect",value:function(e){var n=this,o=this;return(0,a.default)((function(){return(0,h.__generator)(this,(function(i){return(0,l.default)((0,w.default)(t.prototype),"connect",n).call(o,e),o.domain=e.config||"meet.jit.si",window.JitsiMeetJS?o.init(!0):o.load(["https://meet.jit.si/libs/lib-jitsi-meet.min.js"],o),[2]}))}))()}},{key:"init",value:function(e,n){var t=this.uniqueID();if(e&&window.JitsiMeetJS&&t){window.LIA.debug||window.JitsiMeetJS.setLogLevel(window.JitsiMeetJS.logLevels.ERROR),this.connection=new window.JitsiMeetJS.JitsiConnection(null,null,{hosts:{domain:this.domain,muc:"conference.".concat(this.domain),focus:"focus.".concat(this.domain)},configOverwrite:{openBridgeChannel:!1},serviceUrl:"https://".concat(this.domain,"/http-bind?room=").concat(btoa(t)),clientNode:"http://jitsi.org/jitsimeet"});var o=this;this.connection.addEventListener(window.JitsiMeetJS.events.connection.CONNECTION_ESTABLISHED,(function(){o.conferenceRoom=o.connection.initJitsiConference(btoa(t).toLowerCase(),{configOverwrite:{openBridgeChannel:!1},enableLayerSuspension:!0,p2p:{enabled:!0}}),o.conferenceRoom.setDisplayName(o.token),o.conferenceRoom.on(window.JitsiMeetJS.events.conference.CONFERENCE_JOINED,(function(){o.sendConnect()})),o.conferenceRoom.on(window.JitsiMeetJS.errors.conference.PASSWORD_REQUIRED,(function(){o.sendDisconnectError("password required")})),o.conferenceRoom.on(window.JitsiMeetJS.events.conference.USER_JOINED,(function(e){o.users[e]||(o.users[e]=null)})),o.conferenceRoom.on(window.JitsiMeetJS.events.conference.USER_LEFT,(function(e){var n=o.users[e];n&&o.db.removePeer(n),delete o.users[e]})),o.conferenceRoom.on(window.JitsiMeetJS.events.conference.MESSAGE_RECEIVED,(function(e,n){for(var t=o.conferenceRoom.getParticipants(),i=0;i<t.length;i++)if(e===t[i].getId()){o.users[e]=t[i].getDisplayName();break}o.applyUpdate(E.base64_to_unit8(n))})),o.conferenceRoom.join()})),this.connection.addEventListener(window.JitsiMeetJS.events.connection.CONNECTION_FAILED,(function(e){o.sendDisconnectError("Connection failed"+e)})),this.connection.addEventListener(window.JitsiMeetJS.events.connection.CONNECTION_DISCONNECTED,(function(e){o.disconnect()})),this.connection.connect()}else{var i="Jitsi unknown error";n?i="Could not load resource: "+n:void 0===window.JitsiMeetJS&&(i="Could not load Jitsi interface"),this.sendDisconnectError(i)}}},{key:"broadcast",value:function(e){try{var n;null===(n=this.conferenceRoom)||void 0===n||n.sendTextMessage(E.uint8_to_base64(e))}catch(e){console.warn("Jitsi: broadcast =>",e.message)}}}]),t}(E.Sync)}))}();