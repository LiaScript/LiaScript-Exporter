!function(){var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;t.register("lCGwp",(function(n,e){var i,o,r,s;i=n.exports,o="Sync",r=function(){return m},Object.defineProperty(i,o,{get:r,set:s,enumerable:!0,configurable:!0});var a=t("hnmIs"),u=t("9Klpk"),c=t("3bWnf"),l=t("9WzNc"),d=t("div3d"),f=t("kb0qF"),b=t("5ENmm"),h=t("bWNdT"),p=t("32Euv"),v=t("auvHb"),g={nostr:null,mqtt:null,torrent:null},m=function(n){"use strict";(0,f.default)(i,n);var e=(0,h.default)(i);function i(t,n,o,r,s){var a,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return(0,u.default)(this,i),(a=e.call(this,n,o,r,s,c,l)).backend=t,a}return(0,c.default)(i,[{key:"destroy",value:function(){this.connection&&this.connection.leave(),(0,l.default)((0,d.default)(i.prototype),"destroy",this).call(this)}},{key:"connect",value:function(n){var e=this,o=this;return(0,a.default)((function(){return(0,p.__generator)(this,(function(r){if((0,l.default)((0,d.default)(i.prototype),"connect",e).call(o,n),g[o.backend])return o.init(!0),[2];switch(o.backend){case"nostr":t("5ZdQa").then((function(t){g.nostr=t.joinRoom,o.init(!0)})).catch((function(t){o.init(!1,t.message)}));break;case"mqtt":t("8G6Vu").then((function(t){g.mqtt=t.joinRoom,o.init(!0)})).catch((function(t){o.init(!1,t.message)}));break;case"torrent":t("kEbLv").then((function(t){g.torrent=t.joinRoom,o.init(!0)})).catch((function(t){o.init(!1,t.message)}))}return[2]}))}))()}},{key:"init",value:function(t,n){var e=this.uniqueID();if(t&&e){var i={appId:"liascript"};this.password&&(i.password=this.password);var o=JSON.parse("null");o&&(i.rtcConfig=o),this.connection=g[this.backend](i,e),this.connection.onPeerJoin((function(t){return console.log("".concat(t," joined"))})),this.connection.onPeerLeave((function(t){return console.log("".concat(t," left"))}));var r=(0,b.default)(this.connection.makeAction("message"),2),s=r[0],a=r[1];this.pub=s,this.sub=a;var u=this;this.sub((function(t,n){if(t)try{var e=(0,b.default)(t,3),i=e[0],o=e[1],r=e[2];if(i){if(null===o)return;r==u.db.timestamp?u.applyUpdate(v.base64_to_unit8(o)):r>u.db.timestamp?u.broadcast(!0,u.db.encode()):(u.db.timestamp=r,u.applyUpdate(v.base64_to_unit8(o),!0))}else u.pubsubReceive(v.base64_to_unit8(o))}catch(t){console.warn(u.backend,t.message)}})),this.sendConnect()}else{var c=this.backend+" unknown error";n&&(c="Could not load resource: "+n),this.sendDisconnectError(c)}}},{key:"broadcast",value:function(t,n){if(this.publish){var e=null==n?null:v.uint8_to_base64(n);this.pub([t,e,this.db.timestamp])}}}]),i}(v.Sync)})),t.register("5ZdQa",(function(n,e){n.exports=t("3OMJO")(t("5B9gS").getBundleURL("bFNS0")+t("b9xd4").resolve("6gAOH")).then((function(){return t("1UDrq")}))})),t.register("8G6Vu",(function(n,e){n.exports=t("3OMJO")(t("5B9gS").getBundleURL("bFNS0")+t("b9xd4").resolve("7U1md")).then((function(){return t("aB40U")}))})),t.register("kEbLv",(function(n,e){n.exports=t("3OMJO")(t("5B9gS").getBundleURL("bFNS0")+t("b9xd4").resolve("jnhCd")).then((function(){return t("E0fFs")}))}))}();