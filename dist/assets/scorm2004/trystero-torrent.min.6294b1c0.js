!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("E0fFs",(function(n,r){var t,a;t=n.exports,a=function(){return De},Object.defineProperty(t,"joinRoom",{get:a,set:undefined,enumerable:!0,configurable:!0});var u,o,c,i,s,l,f,d,p,v,y,h,m,g,b,w,_,k,P,T,A,S=e("hnmIs"),E=e("bgoEC"),L=e("7j4mF"),D=e("5ENmm"),I=e("6Wo7Q"),C=e("rJmE6"),U=e("32Euv"),j=Math.floor,O=Math.random,R="Trystero",H=function(e,n){return Array(e).fill().map(n)},J=function(e){return H(e,(function(){return"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz"[j(62*O())]})).join("")},M=J(20),x=Promise.all.bind(Promise),q="undefined"!=typeof window,B=Object.entries,N=Object.fromEntries,F=Object.keys,G=function(){},W=function(e){return Error("".concat(R,": ").concat(e))},z=new TextEncoder,K=new TextDecoder,Q=function(e){return z.encode(e)},V=function(e){return K.decode(e)},$=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.join("@")},X=JSON.stringify,Y=JSON.parse,Z={},ee=null,ne=null,re=function(){ee||(ee=new Promise((function(e){ne=e})).finally((function(){ne=null,ee=null})))},te=function(){return null==ne?void 0:ne()},ae="AES-GCM",ue={},oe=(A=(0,S.default)((function(e){var n,r;return(0,U.__generator)(this,(function(t){switch(t.label){case 0:return(n=(u=ue)[o=e])?[3,2]:(r=Array.from,[4,function(){var e=(0,S.default)((function(e,n){var r;return(0,U.__generator)(this,(function(t){switch(t.label){case 0:return r=Uint8Array.bind,[4,crypto.subtle.digest(e,Q(n))];case 1:return[2,new(r.apply(Uint8Array,[void 0,t.sent()]))]}}))}));return function(n,r){return e.apply(this,arguments)}}()("SHA-1",e)]);case 1:n=u[o]=r.apply(Array,[t.sent()]).map((function(e){return e.toString(36)})).join(""),t.label=2;case 2:return[2,n]}}))})),function(e){return A.apply(this,arguments)}),ce=function(){var e=(0,S.default)((function(e,n){var r,t,a,u,o,c;return(0,U.__generator)(this,(function(i){switch(i.label){case 0:return r=crypto.getRandomValues(new Uint8Array(16)),a=r.join(",")+"$",o=(u=crypto.subtle).encrypt,c=[{name:ae,iv:r}],[4,e];case 1:return[4,o.apply(u,c.concat([i.sent(),Q(n)]))];case 2:return[2,a+(t=i.sent(),btoa(String.fromCharCode.apply(null,new Uint8Array(t))))]}}))}));return function(n,r){return e.apply(this,arguments)}}(),ie=function(){var e=(0,S.default)((function(e,n){var r,t,a,u,o,c;return(0,U.__generator)(this,(function(i){switch(i.label){case 0:return r=(0,D.default)(n.split("$"),2),t=r[0],a=r[1],o=(u=crypto.subtle).decrypt,c=[{name:ae,iv:new Uint8Array(t.split(","))}],[4,e];case 1:return[4,o.apply(u,c.concat([i.sent(),function(e){var n=atob(e);return new Uint8Array(n.length).map((function(e,r){return n.charCodeAt(r)})).buffer}(a)]))];case 2:return[2,V.apply(void 0,[i.sent()])]}}))}));return function(n,r){return e.apply(this,arguments)}}(),se="icegatheringstatechange",le="offer",fe=function(e,n){var r=n.rtcConfig,t=n.rtcPolyfill,a=n.turnConfig,u=new(t||RTCPeerConnection)((0,E.default)({iceServers:de.concat(a||[])},r)),o={},c=!1,i=!1,s=null,l=function(e){e.binaryType="arraybuffer",e.bufferedAmountLowThreshold=65535,e.onmessage=function(e){var n;return null===(n=o.data)||void 0===n?void 0:n.call(o,e.data)},e.onopen=function(){var e;return null===(e=o.connect)||void 0===e?void 0:e.call(o)},e.onclose=function(){var e;return null===(e=o.close)||void 0===e?void 0:e.call(o)},e.onerror=function(e){var n;return null===(n=o.error)||void 0===n?void 0:n.call(o,e)}},f=function(e){return Promise.race([new Promise((function(n){var r=function(){"complete"===e.iceGatheringState&&(e.removeEventListener(se,r),n())};e.addEventListener(se,r),r()})),new Promise((function(e){return setTimeout(e,5e3)}))]).then((function(){return{type:e.localDescription.type,sdp:e.localDescription.sdp.replace(/a=ice-options:trickle\s\n/g,"")}}))};return e?(s=u.createDataChannel("data"),l(s)):u.ondatachannel=function(e){var n=e.channel;s=n,l(n)},u.onnegotiationneeded=(0,S.default)((function(){var e,n,r,t;return(0,U.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),c=!0,[4,u.setLocalDescription()];case 1:return a.sent(),[4,f(u)];case 2:return n=a.sent(),null===(e=o.signal)||void 0===e||e.call(o,n),[3,5];case 3:return r=a.sent(),null===(t=o.error)||void 0===t||t.call(o,r),[3,5];case 4:return c=!1,[7];case 5:return[2]}}))})),u.onconnectionstatechange=function(){var e;["disconnected","failed","closed"].includes(u.connectionState)&&(null===(e=o.close)||void 0===e||e.call(o))},u.ontrack=function(e){var n,r;null===(n=o.track)||void 0===n||n.call(o,e.track,e.streams[0]),null===(r=o.stream)||void 0===r||r.call(o,e.streams[0])},u.onremovestream=function(e){var n;return null===(n=o.stream)||void 0===n?void 0:n.call(o,e.stream)},e&&(u.canTrickleIceCandidates||u.onnegotiationneeded()),{created:Date.now(),connection:u,get channel(){return s},get isDead(){return"closed"===u.connectionState},signal:function(n){return(0,S.default)((function(){var r,t,a,l,d;return(0,U.__generator)(this,(function(p){switch(p.label){case 0:if("open"===(null==s?void 0:s.readyState)&&!(null===(r=n.sdp)||void 0===r?void 0:r.includes("a=rtpmap")))return[3,14];p.label=1;case 1:return p.trys.push([1,13,,14]),n.type!==le?[3,8]:c||"stable"!==u.signalingState&&!i?e?[2]:[4,x([u.setLocalDescription({type:"rollback"}),u.setRemoteDescription(n)])]:[3,3];case 2:return p.sent(),[3,5];case 3:return[4,u.setRemoteDescription(n)];case 4:p.sent(),p.label=5;case 5:return[4,u.setLocalDescription()];case 6:return p.sent(),[4,f(u)];case 7:return a=p.sent(),[2,(null===(t=o.signal)||void 0===t||t.call(o,a),a)];case 8:if("answer"!==n.type)return[3,12];i=!0,p.label=9;case 9:return p.trys.push([9,,11,12]),[4,u.setRemoteDescription(n)];case 10:return p.sent(),[3,12];case 11:return i=!1,[7];case 12:return[3,14];case 13:return l=p.sent(),null===(d=o.error)||void 0===d||d.call(o,l),[3,14];case 14:return[2]}}))}))()},sendData:function(e){return s.send(e)},destroy:function(){null==s||s.close(),u.close(),c=!1,i=!1},setHandlers:function(e){return Object.assign(o,e)},offerPromise:e?new Promise((function(e){return o.signal=function(n){n.type===le&&e(n)}})):Promise.resolve(),addStream:function(e){return e.getTracks().forEach((function(n){return u.addTrack(n,e)}))},removeStream:function(e){return u.getSenders().filter((function(n){return e.getTracks().includes(n.track)})).forEach((function(e){return u.removeTrack(e)}))},addTrack:function(e,n){return u.addTrack(e,n)},removeTrack:function(e){var n=u.getSenders().find((function(n){return n.track===e}));n&&u.removeTrack(n)},replaceTrack:function(e,n){var r=u.getSenders().find((function(n){return n.track===e}));if(r)return r.replaceTrack(n)}}},de=(0,I.default)(H(3,(function(e,n){return"stun:stun".concat(n||"",".l.google.com:19302")}))).concat(["stun:stun.cloudflare.com:3478"]).map((function(e){return{urls:e}})),pe=Object.getPrototypeOf(Uint8Array),ve=16369,ye=255,he="bufferedamountlow",me=function(e){return"@_"+e},ge={},be={},we={},_e={},ke={},Pe={},Te={},Ae={},Se=function(){var e=(0,S.default)((function(e){var n;return(0,U.__generator)(this,(function(r){switch(r.label){case 0:return be[e]?[2,be[e]]:[4,oe(e)];case 1:return n=r.sent().slice(0,20),[2,(be[e]=n,we[n]=e,n)]}}))}));return function(n){return e.apply(this,arguments)}}(),Ee=function(){var e=(0,S.default)((function(e,n,r){var t,a;return(0,U.__generator)(this,(function(u){switch(u.label){case 0:return t=e.send,a={action:"announce"},[4,Se(n)];case 1:return[2,t.apply(e,[X.apply(void 0,[E.default.apply(void 0,[(a.info_hash=u.sent(),a.peer_id=M,a),r])])])]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),Le=function(e,n,r){return console.warn("".concat(R,": torrent tracker ").concat(r?"failure":"warning"," from ").concat(e," - ").concat(n))},De=function(e){var n,r,t,a,u=e.init,o=e.subscribe,b=e.announce,w={},_=!1;return function(e,k,P){var T,A,j=e.appId;if(null===(A=w[j])||void 0===A?void 0:A[k])return w[j][k];var O={},J={},z=$(R,j,k),K=oe(z),Z=oe($(z,M)),ee=function(){var e=(0,S.default)((function(e,n,r){var t,a,u;return(0,U.__generator)(this,(function(o){switch(o.label){case 0:return a=(t=crypto.subtle).importKey,u=["raw"],[4,crypto.subtle.digest({name:"SHA-256"},Q("".concat(e,":").concat(n,":").concat(r)))];case 1:return[2,a.apply(t,u.concat([o.sent(),{name:ae},!1,["encrypt","decrypt"]]))]}}))}));return function(n,r,t){return e.apply(this,arguments)}}()(e.password||"",j,k),ne=function(e){return function(){var n=(0,S.default)((function(n){var r;return(0,U.__generator)(this,(function(t){switch(t.label){case 0:return r={type:n.type},[4,e(ee,n.sdp)];case 1:return[2,(r.sdp=t.sent(),r)]}}))}));return function(e){return n.apply(this,arguments)}}()},ue=ne(ie),se=ne(ce),le=function(){return fe(!0,e)},de=function(e,n,r){var t;J[n]?J[n]!==e&&e.destroy():(J[n]=e,Se(e,n),null===(t=O[n])||void 0===t||t.forEach((function(e,n){n!==r&&e.destroy()})),delete O[n])},ge=function(e,n){J[n]===e&&delete J[n]},be=function(e){return(T=r).push.apply(T,(0,I.default)(H(e,le))),x(r.splice(0,e).map((function(e){return e.offerPromise.then(se).then((function(n){return{peer:e,offer:n}}))})))},we=function(n,r){return null==P?void 0:P({error:"incorrect password (".concat(e.password,") when decrypting ").concat(r),appId:j,peerId:n,roomId:k})},_e=function(n){return function(){var r=(0,S.default)((function(r,t,a){var u,o,c,i,s,l,f,d,p,v,m,g,b,w,_,k,P,T,A,S,E,L,I,C,j,R;return(0,U.__generator)(this,(function(U){switch(U.label){case 0:return[4,x([K,Z])];case 1:if(u=D.default.apply(void 0,[U.sent(),2]),o=u[0],c=u[1],r!==o&&r!==c)return[2];if(i="string"==typeof t?Y(t):t,s=i.peerId,l=i.offer,f=i.answer,d=i.peer,s===M||J[s])return[3,16];if(s&&!l&&!f)return[3,14];if(!l)return[3,8];if((null===(p=O[s])||void 0===p?void 0:p[n])&&M>s)return[2];(v=fe(!1,e)).setHandlers({connect:function(){return de(v,s,n)},close:function(){return ge(v,s)}}),U.label=2;case 2:return U.trys.push([2,4,,5]),[4,ue(l)];case 3:return m=U.sent(),[3,5];case 4:return U.sent(),[2,void we(s,"offer")];case 5:return v.isDead?[2]:[4,x([oe($(z,s)),v.signal(m)])];case 6:return g=D.default.apply(void 0,[U.sent(),2]),b=g[0],w=g[1],_=[b],k={peerId:M},[4,se(w)];case 7:return a.apply(void 0,_.concat([X.apply(void 0,[(k.answer=U.sent(),k)])])),[3,13];case 8:if(!f)return[3,13];U.label=9;case 9:return U.trys.push([9,11,,12]),[4,ue(f)];case 10:return P=U.sent(),[3,12];case 11:return U.sent(),[2,void we(s,"answer")];case 12:d?(d.setHandlers({connect:function(){return de(d,s,n)},close:function(){return ge(d,s)}}),d.signal(P)):(A=null===(T=O[s])||void 0===T?void 0:T[n])&&!A.isDead&&A.signal(P),U.label=13;case 13:return[3,16];case 14:return(null===(S=O[s])||void 0===S?void 0:S[n])?[2]:[4,x([be(1),oe($(z,s))])];case 15:E=D.default.apply(void 0,[U.sent(),2]),L=(0,D.default)(E[0],1),I=L[0],C=I.peer,j=I.offer,R=E[1],(y=O)[h=s]||(y[h]=[]),O[s][n]=C,setTimeout((function(){return function(e,n){var r;if(!J[e]){var t=null===(r=O[e])||void 0===r?void 0:r[n];t&&(delete O[e][n],t.destroy())}}(s,n)}),.9*Pe[n]),C.setHandlers({connect:function(){return de(C,s,n)},close:function(){return ge(C,s)}}),a(R,X({peerId:M,offer:j})),U.label=16;case 16:return[2]}}))}));return function(e,n,t){return r.apply(this,arguments)}}()};if(!e)throw W("requires a config map as the first argument");if(!j&&!e.firebaseApp)throw W("config map is missing appId field");if(!k)throw W("roomId argument required");if(!_){var ke=u(e);r=H(20,le),n=Array.isArray(ke)?ke:[ke],_=!0,t=setInterval((function(){return r=r.filter((function(e){var n=Date.now()-e.created<57333;return n||e.destroy(),n}))}),59052.99),a=e.manualRelayReconnection?G:function(){if(q){var e=new AbortController;return addEventListener("online",te,{signal:e.signal}),addEventListener("offline",re,{signal:e.signal}),function(){return e.abort()}}return G}()}var Pe=n.map((function(){return 5333})),Te=[],Ae=n.map(function(){var e=(0,S.default)((function(e,n){var r;return(0,U.__generator)(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return r=[t.sent()],[4,K];case 2:return r=r.concat(t.sent()),[4,Z];case 3:return[2,o.apply(void 0,r.concat([t.sent(),_e(n),be]))]}}))}));return function(n,r){return e.apply(this,arguments)}}());x([K,Z]).then((function(e){var r=(0,D.default)(e,2),t=r[0],a=r[1],u=function(){var e=(0,S.default)((function(e,n){var r;return(0,U.__generator)(this,(function(o){switch(o.label){case 0:return[4,b(e,t,a)];case 1:return"number"==typeof(r=o.sent())&&(Pe[n]=r),Te[n]=setTimeout((function(){return u(e,n)}),Pe[n]),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}();Ae.forEach(function(){var e=(0,S.default)((function(e,r){return(0,U.__generator)(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return t.sent(),[4,n[r]];case 2:return u.apply(void 0,[t.sent(),r]),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}())}));var Se=G;return(m=w)[g=j]||(m[g]={}),w[j][k]=function(e,n,r){var t={},a={},u={},o={},y={},h={},m={},g={onPeerJoin:G,onPeerLeave:G,onPeerStream:G,onPeerTrack:G},b=function(e,n){return(e?Array.isArray(e)?e:[e]:F(t)).flatMap((function(e){var r=t[e];return r?n(e,r):(console.warn("".concat(R,": no peer with id ").concat(e," found")),[])}))},w=function(e){t[e]&&(t[e].destroy(),delete t[e],delete o[e],delete y[e],g.onPeerLeave(e),n(e))},_=function(e){if(a[e])return u[e];if(!e)throw W("action type argument is required");var n=Q(e);if(n.byteLength>12)throw W('action type string "'.concat(e,'" (').concat(n.byteLength,"b) exceeds byte limit (12). Hint: choose a shorter name."));var r=new Uint8Array(12);r.set(n);var o=0;return a[e]={onComplete:G,onProgress:G,setOnComplete:function(n){return a[e]=(0,L.default)((0,E.default)({},a[e]),{onComplete:n})},setOnProgress:function(n){return a[e]=(0,L.default)((0,E.default)({},a[e]),{onProgress:n})},send:function(e,n,a,u){return(0,S.default)((function(){var c,i,s,l,f,d,p,v,y,h,m;return(0,U.__generator)(this,(function(g){switch(g.label){case 0:if(a&&"object"!=typeof a)throw W("action meta argument must be an object");if("undefined"===(c=void 0===e?"undefined":(0,C.default)(e)))throw W("action data cannot be undefined");if(i="string"!==c,s=e instanceof Blob,l=s||e instanceof ArrayBuffer||e instanceof pe,a&&!l)throw W("action meta argument can only be used with binary data");return l?(h=Uint8Array.bind,s?[4,e.arrayBuffer()]:[3,2]):[3,4];case 1:return m=g.sent(),[3,3];case 2:m=e,g.label=3;case 3:return y=new(h.apply(Uint8Array,[void 0,m])),[3,5];case 4:y=Q(i?X(e):e),g.label=5;case 5:return f=y,d=a?Q(X(a)):null,p=Math.ceil(f.byteLength/ve)+(a?1:0)||1,v=H(p,(function(e,n){var t=n===p-1,u=a&&0===n,c=new Uint8Array(15+(u?d.byteLength:t?f.byteLength-ve*(p-(a?2:1)):ve));return c.set(r),c.set([o],12),c.set([t|u<<1|l<<2|i<<3],13),c.set([Math.round((n+1)/p*ye)],14),c.set(a?u?d:f.subarray((n-1)*ve,n*ve):f.subarray(n*ve,(n+1)*ve),15),c})),[2,(o=o+1&ye,x(b(n,function(){var e=(0,S.default)((function(e,n){var r,o,c;return(0,U.__generator)(this,(function(i){switch(i.label){case 0:r=n.channel,o=0,i.label=1;case 1:return o<p?(c=v[o],r.bufferedAmount>r.bufferedAmountLowThreshold?[4,new Promise((function(e){var n=function(){r.removeEventListener(he,n),e()};r.addEventListener(he,n)}))]:[3,3]):[3,5];case 2:i.sent(),i.label=3;case 3:if(!t[e])return[3,5];n.sendData(c),o++,null==u||u(c[14]/ye,e,a),i.label=4;case 4:return[3,1];case 5:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}())))]}}))}))()}},(c=u)[i=e]||(c[i]=[a[e].send,a[e].setOnComplete,a[e].setOnProgress])},k=function(){var e=(0,S.default)((function(){return(0,U.__generator)(this,(function(e){switch(e.label){case 0:return[4,ae("")];case 1:return e.sent(),[4,new Promise((function(e){return setTimeout(e,99)}))];case 2:return e.sent(),B(t).forEach((function(e){var n=(0,D.default)(e,2),r=n[0];n[1].destroy(),delete t[r]})),r(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),P=(0,D.default)(_(me("ping")),2),T=P[0],A=P[1],I=(0,D.default)(_(me("pong")),2),j=I[0],O=I[1],J=(0,D.default)(_(me("signal")),2),M=J[0],z=J[1],K=(0,D.default)(_(me("stream")),2),$=K[0],Z=K[1],ee=(0,D.default)(_(me("track")),2),ne=ee[0],re=ee[1],te=(0,D.default)(_(me("leave")),2),ae=te[0],ue=te[1];return function(e){Se=e}((function(e,n){t[n]||(t[n]=e,e.setHandlers({data:function(e){return function(e,n){var r=new Uint8Array(n),t=V(r.subarray(0,12)).replaceAll("\0",""),u=(0,D.default)(r.subarray(12,13),1)[0],c=(0,D.default)(r.subarray(13,14),1)[0],i=(0,D.default)(r.subarray(14,15),1)[0],y=r.subarray(15),h=!!(1&c),m=!!(2&c),g=!!(4&c),b=!!(8&c);if(a[t]){(s=o)[l=e]||(s[l]={}),(f=o[e])[d=t]||(f[d]={});var w=(p=o[e][t])[v=u]||(p[v]={chunks:[]});if(m?w.meta=Y(V(y)):w.chunks.push(y),a[t].onProgress(i/ye,e,w.meta),h){var _=new Uint8Array(w.chunks.reduce((function(e,n){return e+n.byteLength}),0));if(w.chunks.reduce((function(e,n){return _.set(n,e),e+n.byteLength}),0),delete o[e][t][u],g)a[t].onComplete(_,e,w.meta);else{var k=V(_);a[t].onComplete(b?Y(k):k,e)}}}else console.warn("".concat(R,": received message with unregistered type (").concat(t,")"))}(n,e)},stream:function(e){g.onPeerStream(e,n,h[n]),delete h[n]},track:function(e,r){g.onPeerTrack(e,r,n,m[n]),delete m[n]},signal:function(e){return M(e,n)},close:function(){return w(n)},error:function(e){console.error(e),w(n)}}),g.onPeerJoin(n))})),A((function(e,n){return j("",n)})),O((function(e,n){var r;null===(r=y[n])||void 0===r||r.call(y),delete y[n]})),z((function(e,n){var r;return null===(r=t[n])||void 0===r?void 0:r.signal(e)})),Z((function(e,n){return h[n]=e})),re((function(e,n){return m[n]=e})),ue((function(e,n){return w(n)})),q&&addEventListener("beforeunload",k),{makeAction:_,leave:k,ping:function(e){return(0,S.default)((function(){var n;return(0,U.__generator)(this,(function(r){switch(r.label){case 0:if(!e)throw W("ping() must be called with target peer ID");return n=Date.now(),T("",e),[4,new Promise((function(n){return y[e]=n}))];case 1:return[2,(r.sent(),Date.now()-n)]}}))}))()},getPeers:function(){return N(B(t).map((function(e){var n=(0,D.default)(e,2);return[n[0],n[1].connection]})))},addStream:function(e,n,r){return b(n,function(){var n=(0,S.default)((function(n,t){return(0,U.__generator)(this,(function(a){switch(a.label){case 0:return r?[4,$(r,n)]:[3,2];case 1:a.sent(),a.label=2;case 2:return t.addStream(e),[2]}}))}));return function(e,r){return n.apply(this,arguments)}}())},removeStream:function(e,n){return b(n,(function(n,r){return r.removeStream(e)}))},addTrack:function(e,n,r,t){return b(r,function(){var r=(0,S.default)((function(r,a){return(0,U.__generator)(this,(function(u){switch(u.label){case 0:return t?[4,ne(t,r)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.addTrack(e,n),[2]}}))}));return function(e,n){return r.apply(this,arguments)}}())},removeTrack:function(e,n){return b(n,(function(n,r){return r.removeTrack(e)}))},replaceTrack:function(e,n,r,t){return b(r,function(){var r=(0,S.default)((function(r,a){return(0,U.__generator)(this,(function(u){switch(u.label){case 0:return t?[4,ne(t,r)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.replaceTrack(e,n),[2]}}))}));return function(e,n){return r.apply(this,arguments)}}())},onPeerJoin:function(e){return g.onPeerJoin=e},onPeerLeave:function(e){return g.onPeerLeave=e},onPeerStream:function(e){return g.onPeerStream=e},onPeerTrack:function(e){return g.onPeerTrack=e}}}(0,(function(e){return delete J[e]}),(function(){delete w[j][k],Te.forEach(clearTimeout),Ae.forEach(function(){var e=(0,S.default)((function(e){return(0,U.__generator)(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return[2,n.sent()()]}}))}));return function(n){return e.apply(this,arguments)}}()),clearInterval(t),a(),_=!1}))}}({init:function(e){return function(e,n,r){return(e.relayUrls||n).slice(0,e.relayUrls?e.relayUrls.length:e.relayRedundancy||3)}(e,Ie).map((function(e){var n=function(e,n){var r={},t=function(){var a=new WebSocket(e);a.onclose=function(){var n;ee?ee.then(t):(null!==(n=(b=Z)[w=e])&&void 0!==n||(b[w]=3333),setTimeout(t,Z[e]),Z[e]*=2)},a.onmessage=function(e){return n(e.data)},r.socket=a,r.url=a.url,r.ready=new Promise((function(n){return a.onopen=function(){n(r),Z[e]=3333}})),r.send=function(e){1===a.readyState&&a.send(e)}};return t(),r}(e,(function(e){var n=Y(e),t=n["failure reason"],a=n["warning message"],u=n.interval,o=we[n.info_hash];if(t)Le(r,t,!0);else{var c,i;if(a&&Le(r,a),u&&1e3*u>Pe[r]&&ke[r][o]){var s=Math.min(1e3*u,120333);clearInterval(_e[r][o]),Pe[r]=s,_e[r][o]=setInterval(ke[r][o],s)}Te[n.offer_id]||(n.offer||n.answer)&&(Te[n.offer_id]=!0,null===(i=(c=Ae[r])[o])||void 0===i||i.call(c,n))}})),r=n.url;return ge[r]=n,Ae[r]={},n.ready}))},subscribe:function(e,n,r,t,a){var u=e.url,o=function(){var r=(0,S.default)((function(){var r;return(0,U.__generator)(this,(function(u){switch(u.label){case 0:return[4,a(10)];case 1:return r=N.apply(void 0,[u.sent().map((function(e){return[J(20),e]}))]),Ae[e.url][n]=function(a){if(a.offer)t(n,{offer:a.offer,peerId:a.peer_id},(function(r,t){return Ee(e,n,{answer:Y(t).answer,offer_id:a.offer_id,to_peer_id:a.peer_id})}));else if(a.answer){var u=r[a.offer_id];u&&t(n,{answer:a.answer,peerId:a.peer_id,peer:u.peer})}},Ee(e,n,{numwant:10,offers:B(r).map((function(e){var n=(0,D.default)(e,2);return{offer_id:n[0],offer:n[1].offer}}))}),[2]}}))}));return function(){return r.apply(this,arguments)}}();return Pe[u]=33333,(_=ke)[k=u]||(_[k]={}),ke[u][n]=o,(P=_e)[T=u]||(P[T]={}),_e[u][n]=setInterval(o,Pe[u]),o(),function(){clearInterval(_e[u][n]),delete Ae[u][n],delete ke[u][n]}},announce:function(e){return Pe[e.url]}}),Ie=(ge,["tracker.webtorrent.dev","tracker.openwebtorrent.com","tracker.btorrent.xyz","tracker.files.fm:7073/announce"].map((function(e){return"wss://"+e})))}))}();
