!function(){var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;n.register("1UDrq",(function(e,t){var r,a,u,o;r=e.exports,a="joinRoom",u=function(){return $e},Object.defineProperty(r,a,{get:u,set:o,enumerable:!0,configurable:!0});var i,c,f,s,l,d,v,p,y,h,g,b,m,w,k,A,_,T,x,P=n("hnmIs"),S=n("9Klpk"),E=n("3bWnf"),C=n("eT7f3"),U=n("bgoEC"),L=n("7j4mF"),D=n("5ENmm"),I=n("6Wo7Q"),O=n("rJmE6"),j=n("32Euv"),R={p:0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,n:0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n,h:1n,a:0n,b:7n,Gx:0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Gy:0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n},H=R.p,B=R.n,M=R.Gx,V=R.Gy,q=R.b,K=32,Z=33,X=65,N=48,Y=function(){var n=Error(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");throw function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r;"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&(r=Error).captureStackTrace.apply(r,(0,I.default)(e))}(n,Y),n},G=function(n,e){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=(t=n)instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name,u=null==n?void 0:n.length,o=void 0!==e;return(!a||o&&u!==e)&&Y((r&&'"'.concat(r,'" '))+"expected Uint8Array"+(o?" of length "+e:"")+", got "+(a?"length="+u:"type="+(void 0===n?"undefined":(0,O.default)(n)))),n},J=function(n){return new Uint8Array(n)},z=function(n,e){return n.toString(16).padStart(e,"0")},W=function(n){return Array.from(G(n)).map((function(n){return z(n,2)})).join("")},F=function(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void 0},Q=function(n){var e="hex invalid";if("string"!=typeof n)return Y(e);var t=n.length,r=t/2;if(t%2)return Y(e);for(var a=J(r),u=0,o=0;u<r;u++,o+=2){var i=F(n.charCodeAt(o)),c=F(n.charCodeAt(o+1));if(void 0===i||void 0===c)return Y(e);a[u]=16*i+c}return a},$=function(){return null===globalThis||void 0===globalThis?void 0:globalThis.crypto},nn=function(){var n;return null!==(x=null===(n=$())||void 0===n?void 0:n.subtle)&&void 0!==x?x:Y("crypto.subtle must be defined, consider polyfill")},en=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=J(e.reduce((function(n,e){return n+G(e).length}),0)),a=0;return e.forEach((function(n){r.set(n,a),a+=n.length})),r},tn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;return $().getRandomValues(J(n))},rn=BigInt,an=function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bad number: out of range";return function(n){return"bigint"==(void 0===n?"undefined":(0,O.default)(n))}(n)&&e<=n&&n<t?n:Y(r)},un=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,t=n%e;return t>=0n?t:e+t},on=function(n){return un(n,B)},cn=function(n){return n instanceof yn?n:Y("Point expected")},fn=function(n){return un(un(n*n)*n+q)},sn=function(n){return an(n,0n,H)},ln=function(n){return an(n,1n,H)},dn=function(n){return 0n===(1n&n)},vn=function(n){return Uint8Array.of(n)},pn=function(n){for(var e=fn(ln(n)),t=1n,r=e,a=(H+1n)/4n;a>0n;a>>=1n)1n&a&&(t=t*r%H),r=r*r%H;return un(t*t)===e?t:Y("sqrt invalid")},yn=function(){"use strict";function n(e,t,r){(0,S.default)(this,n),(0,C.default)(this,"X",void 0),(0,C.default)(this,"Y",void 0),(0,C.default)(this,"Z",void 0),this.X=sn(e),this.Y=ln(t),this.Z=sn(r),Object.freeze(this)}return(0,E.default)(n,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"equals",value:function(n){var e=this,t=e.X,r=e.Y,a=e.Z,u=cn(n),o=u.X,i=u.Y,c=u.Z,f=un(t*c),s=un(o*a),l=un(r*c),d=un(i*a);return f===s&&l===d}},{key:"is0",value:function(){return this.equals(gn)}},{key:"negate",value:function(){return new n(this.X,un(-this.Y),this.Z)}},{key:"double",value:function(){return this.add(this)}},{key:"add",value:function(e){var t=this,r=t.X,a=t.Y,u=t.Z,o=cn(e),i=o.X,c=o.Y,f=o.Z,s=0n,l=0n,d=0n,v=un(3n*q),p=un(r*i),y=un(a*c),h=un(u*f),g=un(r+a),b=un(i+c);g=un(g*b),b=un(p+y),g=un(g-b),b=un(r+u);var m=un(i+f);return b=un(b*m),m=un(p+h),b=un(b-m),m=un(a+u),s=un(c+f),m=un(m*s),s=un(y+h),m=un(m-s),d=un(0n*b),s=un(v*h),d=un(s+d),s=un(y-d),d=un(y+d),l=un(s*d),y=un(p+p),y=un(y+p),h=un(0n*h),b=un(v*b),y=un(y+h),h=un(p-h),h=un(0n*h),b=un(b+h),p=un(y*b),l=un(l+p),p=un(m*b),s=un(g*s),s=un(s-p),p=un(g*y),d=un(m*d),new n(s,l,d=un(d+p))}},{key:"subtract",value:function(n){return this.add(cn(n).negate())}},{key:"multiply",value:function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e&&0n===n)return gn;if(function(n){an(n,1n,B)}(n),1n===n)return this;if(this.equals(hn))return zn(n).p;for(var t=gn,r=hn,a=this;n>0n;a=a.double(),n>>=1n)1n&n?t=t.add(a):e&&(r=r.add(a));return t}},{key:"multiplyUnsafe",value:function(n){return this.multiply(n,!1)}},{key:"toAffine",value:function(){var n=this,e=n.X,t=n.Y,r=n.Z;if(this.equals(gn))return{x:0n,y:0n};if(1n===r)return{x:e,y:t};var a=function(n,e){(0n===n||e<=0n)&&Y("no inverse n="+n+" mod="+e);for(var t=un(n,e),r=e,a=0n,u=1n;0n!==t;){var o=r%t,i=a-u*(r/t);r=t,t=o,a=u,u=i}return 1n===r?un(a,e):Y("no inverse")}(r,H);return 1n!==un(r*a)&&Y("inverse invalid"),{x:un(e*a),y:un(t*a)}}},{key:"assertValidity",value:function(){var n=this.toAffine(),e=n.x,t=n.y;return ln(e),ln(t),un(t*t)===fn(e)?this:Y("bad point: not on curve")}},{key:"toBytes",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.assertValidity().toAffine(),t=e.x,r=e.y,a=Pn(t);return n?en(function(n){return vn(dn(n)?2:3)}(r),a):en(vn(4),a,Pn(r))}},{key:"toHex",value:function(n){return W(this.toBytes(n))}}],[{key:"CURVE",value:function(){return R}},{key:"fromAffine",value:function(e){var t=e.x,r=e.y;return 0n===t&&0n===r?gn:new n(t,r,1n)}},{key:"fromBytes",value:function(e){G(e);var t,r=Z,a=X,u=e.length,o=e[0],i=e.subarray(1),c=Tn(i,0,K);if(u===r&&(2===o||3===o)){var f=pn(c),s=dn(f);dn(rn(o))!==s&&(f=un(-f)),t=new n(c,f,1n)}return u===a&&4===o&&(t=new n(c,Tn(i,K,64),1n)),t?t.assertValidity():Y("bad point: not on curve")}},{key:"fromHex",value:function(e){return n.fromBytes(Q(e))}}]),n}();(0,C.default)(yn,"BASE",void 0),(0,C.default)(yn,"ZERO",void 0);var hn=new yn(M,V,1n),gn=new yn(0n,1n,0n);yn.BASE=hn,yn.ZERO=gn;var bn,mn,wn,kn,An,_n=function(n){return rn("0x"+(W(n)||"0"))},Tn=function(n,e,t){return _n(n.subarray(e,t))},xn=Math.pow(2n,256n),Pn=function(n){return Q(z(an(n,0n,xn),64))},Sn="SHA-256",En={hmacSha256Async:function(n,e){return(0,P.default)((function(){var t,r,a;return(0,j.__generator)(this,(function(u){switch(u.label){case 0:return t=nn(),r="HMAC",[4,t.importKey("raw",n,{name:r,hash:{name:Sn}},!1,["sign"])];case 1:return a=u.sent(),[4,t.sign(r,a,e)];case 2:return[2,J.apply(void 0,[u.sent()])]}}))}))()},hmacSha256:void 0,sha256Async:function(n){return(0,P.default)((function(){return(0,j.__generator)(this,(function(e){switch(e.label){case 0:return[4,nn().digest(Sn,n)];case 1:return[2,J.apply(void 0,[e.sent()])]}}))}))()},sha256:void 0},Cn=function(n){return Uint8Array.from("BIP0340/"+n,(function(n){return n.charCodeAt(0)}))},Un="nonce",Ln="challenge",Dn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var a=function(n){var e=En[n];return"function"!=typeof e&&Y("hashes."+n+" not set"),e}("sha256"),u=a(Cn(n));return a(en.apply(void 0,[u,u].concat((0,I.default)(t))))},In=(bn=(0,P.default)((function(n){var e,t,r,a,u,o=arguments;return(0,j.__generator)(this,(function(i){switch(i.label){case 0:for(e=o.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=o[r];return[4,(a=En.sha256Async)(Cn(n))];case 1:return u=i.sent(),[4,a(en.apply(void 0,[u,u].concat((0,I.default)(t))))];case 2:return[2,i.sent()]}}))})),function(n){return bn.apply(this,arguments)}),On=function(n){var e=function(n){var e=_n(G(n,K,"secret key"));return an(e,1n,B,"invalid secret key: outside of range")}(n),t=hn.multiply(e).assertValidity().toAffine(),r=t.x,a=t.y;return{d:dn(a)?e:on(-e),px:Pn(r)}},jn=function(n){return on(_n(n))},Rn=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return jn(Dn.apply(void 0,[Ln].concat((0,I.default)(e))))},Hn=function(){var n=(0,P.default)((function(){var n,e,t,r=arguments;return(0,j.__generator)(this,(function(a){switch(a.label){case 0:for(n=r.length,e=new Array(n),t=0;t<n;t++)e[t]=r[t];return[4,In.apply(void 0,[Ln].concat((0,I.default)(e)))];case 1:return[2,jn.apply(void 0,[a.sent()])]}}))}));return function(){return n.apply(this,arguments)}}(),Bn=function(n){return On(n).px},Mn=(mn=Bn,function(n){var e=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn(N);G(n),(n.length<N||n.length>1024)&&Y("expected 40-1024b");var e=un(_n(n),B-1n);return Pn(e+1n)}(n);return{secretKey:e,publicKey:mn(e)}}),Vn=function(n,e,t){var r=On(e),a=r.px,u=r.d;return{m:G(n),px:a,d:u,a:G(t,K)}},qn=function(n){var e=jn(n);0n===e&&Y("sign failed: k is zero");var t=On(Pn(e));return{rx:t.px,k:t.d}},Kn=function(n,e,t,r){return en(e,Pn(on(n+t*r)))},Zn="invalid signature produced",Xn=function(n,e,t,r){var a,u,o=G(n,64,"signature"),i=G(e,void 0,"message"),c=G(t,K,"publicKey");try{var f=_n(c),s=pn(f),l=dn(s)?s:un(-s),d=new yn(f,l,1n).assertValidity(),v=Pn(d.toAffine().x),p=Tn(o,0,K);an(p,1n,H);var y=Tn(o,K,64);return an(y,1n,B),a=r(en(Pn(p),v,i)),u=function(n){var e,t,r,a=(e=d,t=y,r=on(-n),hn.multiply(t,!1).add(e.multiply(r,!1)).assertValidity()).toAffine(),u=a.x,o=a.y;return!(!dn(o)||u!==p)},a instanceof Promise?a.then(u):u(a)}catch(n){return!1}},Nn=function(n,e,t){return Xn(n,e,t,Rn)},Yn=function(){var n=(0,P.default)((function(n,e,t){return(0,j.__generator)(this,(function(r){return[2,Xn(n,e,t,Hn)]}))}));return function(e,t,r){return n.apply(this,arguments)}}(),Gn={keygen:Mn,getPublicKey:Bn,sign:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn(K),r=Vn(n,e,t),a=r.m,u=r.px,o=r.d,i=r.a,c=Dn("aux",i),f=Pn(o^_n(c)),s=Dn(Un,f,u,a),l=qn(s),d=l.rx,v=l.k,p=Rn(d,u,a),y=Kn(v,d,p,o);return Nn(y,a,u)||Y(Zn),y},verify:Nn,signAsync:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn(K);return(0,P.default)((function(){var r,a,u,o,i,c,f,s,l,d,v,p,y;return(0,j.__generator)(this,(function(h){switch(h.label){case 0:return r=Vn(n,e,t),a=r.m,u=r.px,o=r.d,i=r.a,[4,In("aux",i)];case 1:return c=h.sent(),f=Pn(o^_n(c)),[4,In(Un,f,u,a)];case 2:return s=h.sent(),l=qn(s),d=l.rx,v=l.k,[4,Hn(d,u,a)];case 3:return p=h.sent(),y=Kn(v,d,p,o),[4,Yn(y,a,u)];case 4:return[2,(h.sent()||Y(Zn),y)]}}))}))()},verifyAsync:Yn},Jn=function(n,e){var t=e.negate();return n?t:e},zn=function(n){for(var e=wn||(wn=function(){for(var n=[],e=hn,t=e,r=0;r<33;r++){t=e,n.push(t);for(var a=1;a<128;a++)t=t.add(e),n.push(t);e=t.double()}return n}()),t=gn,r=hn,a=rn(255),u=rn(8),o=0;o<33;o++){var i=Number(n&a);n>>=u,i>128&&(i-=256,n+=1n);var c=128*o,f=c,s=c+Math.abs(i)-1,l=o%2!=0,d=i<0;0===i?r=r.add(Jn(l,e[f])):t=t.add(Jn(d,e[s]))}return 0n!==n&&Y("invalid wnaf"),{p:t,f:r}},Wn=Math.floor,Fn=Math.random,Qn=Math.sin,$n="Trystero",ne=function(n,e){return Array(n).fill().map(e)},ee=function(n){return ne(n,(function(){return"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz"[Wn(62*Fn())]})).join("")},te=ee(20),re=Promise.all.bind(Promise),ae="undefined"!=typeof window,ue=Object.entries,oe=Object.fromEntries,ie=Object.keys,ce=function(){},fe=function(n){return Error("".concat($n,": ").concat(n))},se=new TextEncoder,le=new TextDecoder,de=function(n){return se.encode(n)},ve=function(n){return le.decode(n)},pe=function(n){return n.reduce((function(n,e){return n+e.toString(16).padStart(2,"0")}),"")},ye=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.join("@")},he=JSON.stringify,ge=JSON.parse,be=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return n.split("").reduce((function(n,e){return n+e.charCodeAt(0)}),0)%e},me={},we=null,ke=null,Ae=function(){we||(we=new Promise((function(n){ke=n})).finally((function(){ke=null,we=null})))},_e=function(){return null==ke?void 0:ke()},Te="AES-GCM",xe={},Pe=function(){var n=(0,P.default)((function(n,e){var t;return(0,j.__generator)(this,(function(r){switch(r.label){case 0:return t=Uint8Array.bind,[4,crypto.subtle.digest(n,de(e))];case 1:return[2,new(t.apply(Uint8Array,[void 0,r.sent()]))]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Se=function(){var n=(0,P.default)((function(n){var e,t;return(0,j.__generator)(this,(function(r){switch(r.label){case 0:return(e=(i=xe)[c=n])?[3,2]:(t=Array.from,[4,Pe("SHA-1",n)]);case 1:e=i[c]=t.apply(Array,[r.sent()]).map((function(n){return n.toString(36)})).join(""),r.label=2;case 2:return[2,e]}}))}));return function(e){return n.apply(this,arguments)}}(),Ee=function(){var n=(0,P.default)((function(n,e){var t,r,a,u,o,i;return(0,j.__generator)(this,(function(c){switch(c.label){case 0:return t=crypto.getRandomValues(new Uint8Array(16)),a=t.join(",")+"$",o=(u=crypto.subtle).encrypt,i=[{name:Te,iv:t}],[4,n];case 1:return[4,o.apply(u,i.concat([c.sent(),de(e)]))];case 2:return[2,a+(r=c.sent(),btoa(String.fromCharCode.apply(null,new Uint8Array(r))))]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Ce=function(){var n=(0,P.default)((function(n,e){var t,r,a,u,o,i;return(0,j.__generator)(this,(function(c){switch(c.label){case 0:return t=(0,D.default)(e.split("$"),2),r=t[0],a=t[1],o=(u=crypto.subtle).decrypt,i=[{name:Te,iv:new Uint8Array(r.split(","))}],[4,n];case 1:return[4,o.apply(u,i.concat([c.sent(),function(n){var e=atob(n);return new Uint8Array(e.length).map((function(n,t){return e.charCodeAt(t)})).buffer}(a)]))];case 2:return[2,ve.apply(void 0,[c.sent()])]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Ue="icegatheringstatechange",Le="offer",De=function(n,e){var t=e.rtcConfig,r=e.rtcPolyfill,a=e.turnConfig,u=new(r||RTCPeerConnection)((0,U.default)({iceServers:Ie.concat(a||[])},t)),o={},i=!1,c=!1,f=null,s=function(n){n.binaryType="arraybuffer",n.bufferedAmountLowThreshold=65535,n.onmessage=function(n){var e;return null===(e=o.data)||void 0===e?void 0:e.call(o,n.data)},n.onopen=function(){var n;return null===(n=o.connect)||void 0===n?void 0:n.call(o)},n.onclose=function(){var n;return null===(n=o.close)||void 0===n?void 0:n.call(o)},n.onerror=function(n){var e;return null===(e=o.error)||void 0===e?void 0:e.call(o,n)}},l=function(n){return Promise.race([new Promise((function(e){var t=function(){"complete"===n.iceGatheringState&&(n.removeEventListener(Ue,t),e())};n.addEventListener(Ue,t),t()})),new Promise((function(n){return setTimeout(n,5e3)}))]).then((function(){return{type:n.localDescription.type,sdp:n.localDescription.sdp.replace(/a=ice-options:trickle\s\n/g,"")}}))};return n?(f=u.createDataChannel("data"),s(f)):u.ondatachannel=function(n){var e=n.channel;f=e,s(e)},u.onnegotiationneeded=(0,P.default)((function(){var n,e,t,r;return(0,j.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),i=!0,[4,u.setLocalDescription()];case 1:return a.sent(),[4,l(u)];case 2:return e=a.sent(),null===(n=o.signal)||void 0===n||n.call(o,e),[3,5];case 3:return t=a.sent(),null===(r=o.error)||void 0===r||r.call(o,t),[3,5];case 4:return i=!1,[7];case 5:return[2]}}))})),u.onconnectionstatechange=function(){var n;["disconnected","failed","closed"].includes(u.connectionState)&&(null===(n=o.close)||void 0===n||n.call(o))},u.ontrack=function(n){var e,t;null===(e=o.track)||void 0===e||e.call(o,n.track,n.streams[0]),null===(t=o.stream)||void 0===t||t.call(o,n.streams[0])},u.onremovestream=function(n){var e;return null===(e=o.stream)||void 0===e?void 0:e.call(o,n.stream)},n&&(u.canTrickleIceCandidates||u.onnegotiationneeded()),{created:Date.now(),connection:u,get channel(){return f},get isDead(){return"closed"===u.connectionState},signal:function(e){return(0,P.default)((function(){var t,r,a,s,d;return(0,j.__generator)(this,(function(v){switch(v.label){case 0:if("open"===(null==f?void 0:f.readyState)&&!(null===(t=e.sdp)||void 0===t?void 0:t.includes("a=rtpmap")))return[3,14];v.label=1;case 1:return v.trys.push([1,13,,14]),e.type!==Le?[3,8]:i||"stable"!==u.signalingState&&!c?n?[2]:[4,re([u.setLocalDescription({type:"rollback"}),u.setRemoteDescription(e)])]:[3,3];case 2:return v.sent(),[3,5];case 3:return[4,u.setRemoteDescription(e)];case 4:v.sent(),v.label=5;case 5:return[4,u.setLocalDescription()];case 6:return v.sent(),[4,l(u)];case 7:return a=v.sent(),[2,(null===(r=o.signal)||void 0===r||r.call(o,a),a)];case 8:if("answer"!==e.type)return[3,12];c=!0,v.label=9;case 9:return v.trys.push([9,,11,12]),[4,u.setRemoteDescription(e)];case 10:return v.sent(),[3,12];case 11:return c=!1,[7];case 12:return[3,14];case 13:return s=v.sent(),null===(d=o.error)||void 0===d||d.call(o,s),[3,14];case 14:return[2]}}))}))()},sendData:function(n){return f.send(n)},destroy:function(){null==f||f.close(),u.close(),i=!1,c=!1},setHandlers:function(n){return Object.assign(o,n)},offerPromise:n?new Promise((function(n){return o.signal=function(e){e.type===Le&&n(e)}})):Promise.resolve(),addStream:function(n){return n.getTracks().forEach((function(e){return u.addTrack(e,n)}))},removeStream:function(n){return u.getSenders().filter((function(e){return n.getTracks().includes(e.track)})).forEach((function(n){return u.removeTrack(n)}))},addTrack:function(n,e){return u.addTrack(n,e)},removeTrack:function(n){var e=u.getSenders().find((function(e){return e.track===n}));e&&u.removeTrack(e)},replaceTrack:function(n,e){var t=u.getSenders().find((function(e){return e.track===n}));if(t)return t.replaceTrack(e)}}},Ie=(0,I.default)(ne(3,(function(n,e){return"stun:stun".concat(e||"",".l.google.com:19302")}))).concat(["stun:stun.cloudflare.com:3478"]).map((function(n){return{urls:n}})),Oe=Object.getPrototypeOf(Uint8Array),je=16369,Re=255,He="bufferedamountlow",Be=function(n){return"@_"+n},Me={},Ve="EVENT",qe=Gn.keygen(),Ke=qe.secretKey,Ze=qe.publicKey,Xe=pe(Ze),Ne={},Ye={},Ge={},Je=function(){return Math.floor(Date.now()/1e3)},ze=function(n){return null!==(kn=(g=Ge)[b=n])&&void 0!==kn?kn:g[b]=be(n,1e4)+2e4},We=function(){var n=(0,P.default)((function(n,e){var t,r,a,u,o;return(0,j.__generator)(this,(function(i){switch(i.label){case 0:return t={kind:ze(n),tags:[["x",n]],created_at:Je(),content:e,pubkey:Xe},[4,Pe("SHA-256",he([0,t.pubkey,t.created_at,t.kind,t.tags,t.content]))];case 1:return r=i.sent(),a=[Ve],u=[(0,U.default)({},t)],o={id:pe(r)},[4,Gn.signAsync(r,Ke)];case 2:return[2,he.apply(void 0,[a.concat([L.default.apply(void 0,u.concat([(o.sig=pe.apply(void 0,[i.sent()]),o)]))])])]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Fe=function(n,e){return Ne[n]=e,he(["REQ",n,{kinds:[ze(e)],since:Je(),"#x":[e]}])},Qe=function(n){return delete Ne[n],he(["CLOSE",n])},$e=function(n){var e,t,r,a,u=n.init,o=n.subscribe,i=n.announce,c={},g=!1;return function(n,b,_){var T,x,S=n.appId;if(null===(x=c[S])||void 0===x?void 0:x[b])return c[S][b];var E={},C={},R=ye($n,S,b),H=Se(R),B=Se(ye(R,te)),M=function(){var n=(0,P.default)((function(n,e,t){var r,a,u;return(0,j.__generator)(this,(function(o){switch(o.label){case 0:return a=(r=crypto.subtle).importKey,u=["raw"],[4,crypto.subtle.digest({name:"SHA-256"},de("".concat(n,":").concat(e,":").concat(t)))];case 1:return[2,a.apply(r,u.concat([o.sent(),{name:Te},!1,["encrypt","decrypt"]]))]}}))}));return function(e,t,r){return n.apply(this,arguments)}}()(n.password||"",S,b),V=function(n){return function(){var e=(0,P.default)((function(e){var t;return(0,j.__generator)(this,(function(r){switch(r.label){case 0:return t={type:e.type},[4,n(M,e.sdp)];case 1:return[2,(t.sdp=r.sent(),t)]}}))}));return function(n){return e.apply(this,arguments)}}()},q=V(Ce),K=V(Ee),Z=function(){return De(!0,n)},X=function(n,e,t){var r;C[e]?C[e]!==n&&n.destroy():(C[e]=n,$(n,e),null===(r=E[e])||void 0===r||r.forEach((function(n,e){e!==t&&n.destroy()})),delete E[e])},N=function(n,e){C[e]===n&&delete C[e]},Y=function(n){return(T=t).push.apply(T,(0,I.default)(ne(n,Z))),re(t.splice(0,n).map((function(n){return n.offerPromise.then(K).then((function(e){return{peer:n,offer:e}}))})))},G=function(e,t){return null==_?void 0:_({error:"incorrect password (".concat(n.password,") when decrypting ").concat(t),appId:S,peerId:e,roomId:b})},J=function(e){return function(){var t=(0,P.default)((function(t,r,a){var u,o,i,c,f,s,l,d,v,p,y,h,g,b,k,A,_,T,x,P,S,U,L,I,O,M;return(0,j.__generator)(this,(function(j){switch(j.label){case 0:return[4,re([H,B])];case 1:if(u=D.default.apply(void 0,[j.sent(),2]),o=u[0],i=u[1],t!==o&&t!==i)return[2];if(c="string"==typeof r?ge(r):r,f=c.peerId,s=c.offer,l=c.answer,d=c.peer,f===te||C[f])return[3,16];if(f&&!s&&!l)return[3,14];if(!s)return[3,8];if((null===(v=E[f])||void 0===v?void 0:v[e])&&te>f)return[2];(p=De(!1,n)).setHandlers({connect:function(){return X(p,f,e)},close:function(){return N(p,f)}}),j.label=2;case 2:return j.trys.push([2,4,,5]),[4,q(s)];case 3:return y=j.sent(),[3,5];case 4:return j.sent(),[2,void G(f,"offer")];case 5:return p.isDead?[2]:[4,re([Se(ye(R,f)),p.signal(y)])];case 6:return h=D.default.apply(void 0,[j.sent(),2]),g=h[0],b=h[1],k=[g],A={peerId:te},[4,K(b)];case 7:return a.apply(void 0,k.concat([he.apply(void 0,[(A.answer=j.sent(),A)])])),[3,13];case 8:if(!l)return[3,13];j.label=9;case 9:return j.trys.push([9,11,,12]),[4,q(l)];case 10:return _=j.sent(),[3,12];case 11:return j.sent(),[2,void G(f,"answer")];case 12:d?(d.setHandlers({connect:function(){return X(d,f,e)},close:function(){return N(d,f)}}),d.signal(_)):(x=null===(T=E[f])||void 0===T?void 0:T[e])&&!x.isDead&&x.signal(_),j.label=13;case 13:return[3,16];case 14:return(null===(P=E[f])||void 0===P?void 0:P[e])?[2]:[4,re([Y(1),Se(ye(R,f))])];case 15:S=D.default.apply(void 0,[j.sent(),2]),U=(0,D.default)(S[0],1),L=U[0],I=L.peer,O=L.offer,M=S[1],(m=E)[w=f]||(m[w]=[]),E[f][e]=I,setTimeout((function(){return function(n,e){var t;if(!C[n]){var r=null===(t=E[n])||void 0===t?void 0:t[e];r&&(delete E[n][e],r.destroy())}}(f,e)}),.9*W[e]),I.setHandlers({connect:function(){return X(I,f,e)},close:function(){return N(I,f)}}),a(M,he({peerId:te,offer:O})),j.label=16;case 16:return[2]}}))}));return function(n,e,r){return t.apply(this,arguments)}}()};if(!n)throw fe("requires a config map as the first argument");if(!S&&!n.firebaseApp)throw fe("config map is missing appId field");if(!b)throw fe("roomId argument required");if(!g){var z=u(n);t=ne(20,Z),e=Array.isArray(z)?z:[z],g=!0,r=setInterval((function(){return t=t.filter((function(n){var e=Date.now()-n.created<57333;return e||n.destroy(),e}))}),59052.99),a=n.manualRelayReconnection?ce:function(){if(ae){var n=new AbortController;return addEventListener("online",_e,{signal:n.signal}),addEventListener("offline",Ae,{signal:n.signal}),function(){return n.abort()}}return ce}()}var W=e.map((function(){return 5333})),F=[],Q=e.map(function(){var n=(0,P.default)((function(n,e){var t;return(0,j.__generator)(this,(function(r){switch(r.label){case 0:return[4,n];case 1:return t=[r.sent()],[4,H];case 2:return t=t.concat(r.sent()),[4,B];case 3:return[2,o.apply(void 0,t.concat([r.sent(),J(e),Y]))]}}))}));return function(e,t){return n.apply(this,arguments)}}());re([H,B]).then((function(n){var t=(0,D.default)(n,2),r=t[0],a=t[1],u=function(){var n=(0,P.default)((function(n,e){var t;return(0,j.__generator)(this,(function(o){switch(o.label){case 0:return[4,i(n,r,a)];case 1:return"number"==typeof(t=o.sent())&&(W[e]=t),F[e]=setTimeout((function(){return u(n,e)}),W[e]),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}();Q.forEach(function(){var n=(0,P.default)((function(n,t){return(0,j.__generator)(this,(function(r){switch(r.label){case 0:return[4,n];case 1:return r.sent(),[4,e[t]];case 2:return u.apply(void 0,[r.sent(),t]),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}())}));var $=ce;return(k=c)[A=S]||(k[A]={}),c[S][b]=function(n,e,t){var r={},a={},u={},o={},i={},c={},g={},b={onPeerJoin:ce,onPeerLeave:ce,onPeerStream:ce,onPeerTrack:ce},m=function(n,e){return(n?Array.isArray(n)?n:[n]:ie(r)).flatMap((function(n){var t=r[n];return t?e(n,t):(console.warn("".concat($n,": no peer with id ").concat(n," found")),[])}))},w=function(n){r[n]&&(r[n].destroy(),delete r[n],delete o[n],delete i[n],b.onPeerLeave(n),e(n))},k=function(n){if(a[n])return u[n];if(!n)throw fe("action type argument is required");var e=de(n);if(e.byteLength>12)throw fe('action type string "'.concat(n,'" (').concat(e.byteLength,"b) exceeds byte limit (12). Hint: choose a shorter name."));var t=new Uint8Array(12);t.set(e);var o=0;return a[n]={onComplete:ce,onProgress:ce,setOnComplete:function(e){return a[n]=(0,L.default)((0,U.default)({},a[n]),{onComplete:e})},setOnProgress:function(e){return a[n]=(0,L.default)((0,U.default)({},a[n]),{onProgress:e})},send:function(n,e,a,u){return(0,P.default)((function(){var i,c,f,s,l,d,v,p,y,h,g;return(0,j.__generator)(this,(function(b){switch(b.label){case 0:if(a&&"object"!=typeof a)throw fe("action meta argument must be an object");if("undefined"===(i=void 0===n?"undefined":(0,O.default)(n)))throw fe("action data cannot be undefined");if(c="string"!==i,f=n instanceof Blob,s=f||n instanceof ArrayBuffer||n instanceof Oe,a&&!s)throw fe("action meta argument can only be used with binary data");return s?(h=Uint8Array.bind,f?[4,n.arrayBuffer()]:[3,2]):[3,4];case 1:return g=b.sent(),[3,3];case 2:g=n,b.label=3;case 3:return y=new(h.apply(Uint8Array,[void 0,g])),[3,5];case 4:y=de(c?he(n):n),b.label=5;case 5:return l=y,d=a?de(he(a)):null,v=Math.ceil(l.byteLength/je)+(a?1:0)||1,p=ne(v,(function(n,e){var r=e===v-1,u=a&&0===e,i=new Uint8Array(15+(u?d.byteLength:r?l.byteLength-je*(v-(a?2:1)):je));return i.set(t),i.set([o],12),i.set([r|u<<1|s<<2|c<<3],13),i.set([Math.round((e+1)/v*Re)],14),i.set(a?u?d:l.subarray((e-1)*je,e*je):l.subarray(e*je,(e+1)*je),15),i})),[2,(o=o+1&Re,re(m(e,function(){var n=(0,P.default)((function(n,e){var t,o,i;return(0,j.__generator)(this,(function(c){switch(c.label){case 0:t=e.channel,o=0,c.label=1;case 1:return o<v?(i=p[o],t.bufferedAmount>t.bufferedAmountLowThreshold?[4,new Promise((function(n){var e=function(){t.removeEventListener(He,e),n()};t.addEventListener(He,e)}))]:[3,3]):[3,5];case 2:c.sent(),c.label=3;case 3:if(!r[n])return[3,5];e.sendData(i),o++,null==u||u(i[14]/Re,n,a),c.label=4;case 4:return[3,1];case 5:return[2]}}))}));return function(e,t){return n.apply(this,arguments)}}())))]}}))}))()}},(f=u)[s=n]||(f[s]=[a[n].send,a[n].setOnComplete,a[n].setOnProgress])},A=function(){var n=(0,P.default)((function(){return(0,j.__generator)(this,(function(n){switch(n.label){case 0:return[4,N("")];case 1:return n.sent(),[4,new Promise((function(n){return setTimeout(n,99)}))];case 2:return n.sent(),ue(r).forEach((function(n){var e=(0,D.default)(n,2),t=e[0];e[1].destroy(),delete r[t]})),t(),[2]}}))}));return function(){return n.apply(this,arguments)}}(),_=(0,D.default)(k(Be("ping")),2),T=_[0],x=_[1],S=(0,D.default)(k(Be("pong")),2),E=S[0],C=S[1],I=(0,D.default)(k(Be("signal")),2),R=I[0],H=I[1],B=(0,D.default)(k(Be("stream")),2),M=B[0],V=B[1],q=(0,D.default)(k(Be("track")),2),K=q[0],Z=q[1],X=(0,D.default)(k(Be("leave")),2),N=X[0],Y=X[1];return n((function(n,e){r[e]||(r[e]=n,n.setHandlers({data:function(n){return function(n,e){var t=new Uint8Array(e),r=ve(t.subarray(0,12)).replaceAll("\0",""),u=(0,D.default)(t.subarray(12,13),1)[0],i=(0,D.default)(t.subarray(13,14),1)[0],c=(0,D.default)(t.subarray(14,15),1)[0],f=t.subarray(15),s=!!(1&i),g=!!(2&i),b=!!(4&i),m=!!(8&i);if(a[r]){(l=o)[d=n]||(l[d]={}),(v=o[n])[p=r]||(v[p]={});var w=(y=o[n][r])[h=u]||(y[h]={chunks:[]});if(g?w.meta=ge(ve(f)):w.chunks.push(f),a[r].onProgress(c/Re,n,w.meta),s){var k=new Uint8Array(w.chunks.reduce((function(n,e){return n+e.byteLength}),0));if(w.chunks.reduce((function(n,e){return k.set(e,n),n+e.byteLength}),0),delete o[n][r][u],b)a[r].onComplete(k,n,w.meta);else{var A=ve(k);a[r].onComplete(m?ge(A):A,n)}}}else console.warn("".concat($n,": received message with unregistered type (").concat(r,")"))}(e,n)},stream:function(n){b.onPeerStream(n,e,c[e]),delete c[e]},track:function(n,t){b.onPeerTrack(n,t,e,g[e]),delete g[e]},signal:function(n){return R(n,e)},close:function(){return w(e)},error:function(n){console.error(n),w(e)}}),b.onPeerJoin(e))})),x((function(n,e){return E("",e)})),C((function(n,e){var t;null===(t=i[e])||void 0===t||t.call(i),delete i[e]})),H((function(n,e){var t;return null===(t=r[e])||void 0===t?void 0:t.signal(n)})),V((function(n,e){return c[e]=n})),Z((function(n,e){return g[e]=n})),Y((function(n,e){return w(e)})),ae&&addEventListener("beforeunload",A),{makeAction:k,leave:A,ping:function(n){return(0,P.default)((function(){var e;return(0,j.__generator)(this,(function(t){switch(t.label){case 0:if(!n)throw fe("ping() must be called with target peer ID");return e=Date.now(),T("",n),[4,new Promise((function(e){return i[n]=e}))];case 1:return[2,(t.sent(),Date.now()-e)]}}))}))()},getPeers:function(){return oe(ue(r).map((function(n){var e=(0,D.default)(n,2);return[e[0],e[1].connection]})))},addStream:function(n,e,t){return m(e,function(){var e=(0,P.default)((function(e,r){return(0,j.__generator)(this,(function(a){switch(a.label){case 0:return t?[4,M(t,e)]:[3,2];case 1:a.sent(),a.label=2;case 2:return r.addStream(n),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}())},removeStream:function(n,e){return m(e,(function(e,t){return t.removeStream(n)}))},addTrack:function(n,e,t,r){return m(t,function(){var t=(0,P.default)((function(t,a){return(0,j.__generator)(this,(function(u){switch(u.label){case 0:return r?[4,K(r,t)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.addTrack(n,e),[2]}}))}));return function(n,e){return t.apply(this,arguments)}}())},removeTrack:function(n,e){return m(e,(function(e,t){return t.removeTrack(n)}))},replaceTrack:function(n,e,t,r){return m(t,function(){var t=(0,P.default)((function(t,a){return(0,j.__generator)(this,(function(u){switch(u.label){case 0:return r?[4,K(r,t)]:[3,2];case 1:u.sent(),u.label=2;case 2:return a.replaceTrack(n,e),[2]}}))}));return function(n,e){return t.apply(this,arguments)}}())},onPeerJoin:function(n){return b.onPeerJoin=n},onPeerLeave:function(n){return b.onPeerLeave=n},onPeerStream:function(n){return b.onPeerStream=n},onPeerTrack:function(n){return b.onPeerTrack=n}}}((function(n){return $=n}),(function(n){return delete C[n]}),(function(){delete c[S][b],F.forEach(clearTimeout),Q.forEach(function(){var n=(0,P.default)((function(n){return(0,j.__generator)(this,(function(e){switch(e.label){case 0:return[4,n];case 1:return[2,e.sent()()]}}))}));return function(e){return n.apply(this,arguments)}}()),clearInterval(r),a(),g=!1}))}}({init:function(n){return function(n,e,t){return(n.relayUrls||function(n,e){for(var t=(0,I.default)(n),r=function(){var n=1e4*Qn(e++);return n-Wn(n)},a=t.length;a;){var u,o=Wn(r()*a--);u=[t[o],t[a]],t[a]=u[0],t[o]=u[1]}return t}(e,be(n.appId))).slice(0,n.relayUrls?n.relayUrls.length:n.relayRedundancy||t)}(n,nt,5).map((function(n){var e=function(n,e){var t={},r=function(){var a=new WebSocket(n);a.onclose=function(){var e;we?we.then(r):(null!==(e=(_=me)[T=n])&&void 0!==e||(_[T]=3333),setTimeout(r,me[n]),me[n]*=2)},a.onmessage=function(n){return e(n.data)},t.socket=a,t.url=a.url,t.ready=new Promise((function(e){return a.onopen=function(){e(t),me[n]=3333}})),t.send=function(n){1===a.readyState&&a.send(n)}};return r(),t}(n,(function(n){var t,r=(0,D.default)(ge(n),4),a=r[0],u=r[1],o=r[2],i=r[3];if(a===Ve)null===(t=Ye[u])||void 0===t||t.call(Ye,Ne[u],o.content);else{var c="".concat($n,": relay failure from ").concat(e.url," - ");"NOTICE"===a?console.warn(c+u):"OK"!==a||o||console.warn(c+i)}}));return Me[n]=e,e.ready}))},subscribe:function(n,e,t,r){var a=ee(64),u=ee(64);return Ye[a]=Ye[u]=function(e,t){return r(e,t,function(){var e=(0,P.default)((function(e,t){var r;return(0,j.__generator)(this,(function(a){switch(a.label){case 0:return r=n.send,[4,We(e,t)];case 1:return[2,r.apply(n,[a.sent()])]}}))}));return function(n,t){return e.apply(this,arguments)}}())},n.send(Fe(a,e)),n.send(Fe(u,t)),function(){n.send(Qe(a)),n.send(Qe(u)),delete Ye[a],delete Ye[u]}},announce:function(n,e){return(0,P.default)((function(){var t;return(0,j.__generator)(this,(function(r){switch(r.label){case 0:return t=n.send,[4,We(e,he({peerId:te}))];case 1:return[2,t.apply(n,[r.sent()])]}}))}))()}}),nt=(An=Me,["black.nostrcity.club","ftp.halifax.rwth-aachen.de/nostr","nos.lol","nostr.cool110.xyz","nostr.data.haus","nostr.sathoarder.com","nostr.vulpem.com","relay.agorist.space","relay.binaryrobot.com","relay.damus.io","relay.fountain.fm","relay.mostro.network","relay.nostraddress.com","relay.nostrdice.com","relay.nostromo.social","relay.oldenburg.cool","relay.verified-nostr.com","yabu.me/v2"].map((function(n){return"wss://"+n})))}))}();